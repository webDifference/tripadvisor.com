require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"trip_planner_breadcrumbs","handlers",["handlers"]);n(["placement","ta/Core/TA.FireEvent"],function(e,n){"use strict";function r(n){var r=document.getElementById(e.id);r&&(r.innerHTML=n.innerHTML)}return n.on("update-"+e.name,r),{}})});
require(["ta/rollupAmdShim"],function(a){a.install(["overlays/uiOverlay","ta/common/behavior/Ads-pagemoniker","servlets/standardTemplateSupport","facebook/authutils","google/authutils"],["ta","page-model","ta","ta","page-model","page-model","page-model"])});if(window.requirejs&&requirejs.taConfig){requirejs.taConfig({deferred:{},name:"short_lived_global",files:{js3_secure:{ssl:{ta:{common:{behavior:{"Ads-pagemoniker":1}}}}},"js-amd":{src:{facebook:{authutils:1},overlays:{uiOverlay:1},servlets:{standardTemplateSupport:1},google:{authutils:1}}}},_:{baseUrl:"/"}})};
define("ta/util/SessionStorage",["vanillajs","ns-exporter"],function(e,t){var n={};return n.canUseSessionStore=function(){try{if(window.sessionStorage){var e="taLsTest";sessionStorage.setItem(e,"1");var t=sessionStorage.getItem(e);return"1"==t}}catch(e){return!1}},n.canUseSessionStore()?(n.setObject=function(e,t){sessionStorage.setItem(e,JSON.stringify(t))},n.getObject=function(e){var t=sessionStorage.getItem(e);return t?JSON.parse(t):null},n.remove=function(e){sessionStorage.removeItem(e)}):(n.setObject=function(){},n.getObject=function(){return null},n.remove=function(){}),t.exportTo(n,"ta.util.sessionStorage"),n});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"browser_mode_tracking","handlers",["handlers"]);n(["placement","ta/Core/TA.Event","ta/Browser","ta/Core/TA.Record","ta/util/SessionStorage"],function(e,n,o,r,t){function s(e){r.trackEventOnPage("BROWSER_TRACKING",a,e,null,!0)}var a,i=e.id+"_browser_mode_tracked";n.queueForLoad(function(){t.canUseSessionStore()&&sessionStorage.getItem(i)||o.isChrome()&&(a="Chrome",o.isChromeIncognito(s),t.canUseSessionStore()&&sessionStorage.setItem(i,"1"))})})});
define("calendars/CalendarDate",["vanillajs"],function(t){"use strict";function e(t){t=t||new Date,this.date=new Date(t.getFullYear(),t.getMonth(),t.getDate())}return e.prototype={constructor:e,daysInMonth:function(){return new Date(this.year(),this.month()+1,0).getDate()},eachDayInMonth:function(t){for(var n=1,r=this.daysInMonth();n<=r;n++)t(new e(new Date(this.year(),this.month(),n)))},thisMonth:function(){return new e(new Date(this.year(),this.month(),1))},nextMonth:function(){return this.relativeMonth(1)},previousMonth:function(){return this.relativeMonth(-1)},relativeMonth:function(t){return new e(new Date(this.year(),this.month()+t,1))},relativeDay:function(t){return new e(new Date(this.year(),this.month(),this.day()+t))},year:function(){return this.date.getFullYear()},month:function(){return this.date.getMonth()},day:function(){return this.date.getDate()},dayOfWeek:function(){return this.date.getDay()},firstDayOfMonth:function(){return new Date(this.year(),this.month(),1).getDay()},inRange:function(t,e){return!(!t||!e)&&(this.compare(t)>0&&this.compare(e)<0)},compare:function(t){for(var e,n=["getFullYear","getMonth","getDate"],r=0,a=n.length;r<a;r++){if(e=n[r],this.date[e]()<t.date[e]())return-1;if(this.date[e]()>t.date[e]())return 1}return 0},daysTo:function(t){return Math.ceil((t.date.getTime()-this.date.getTime())/864e5)},toString:function(){return this.year()+"-"+this.month()+"-"+this.day()}},e.fromString=function(t){var n=t.split("-");return new e(new Date(n[0],n[1],n[2]))},e});
define("mixins/page-dates/Utils",["vanillajs"],function(e){"use strict";function t(e){var t=String(e);return(1===t.length?"0":"")+t}function r(e){return e.getFullYear()+"_"+t(e.getMonth()+1)+"_"+t(e.getDate())}function n(e){if(!e)return null;var t=e.split("-");return t.length<2&&(t=e.split("_")),new Date(parseInt(t[0],10),parseInt(t[1],10)-1,parseInt(t[2],10))}function a(e){return"[object Date]"===Object.prototype.toString.call(e)}function i(e,t){if((!e||!t)&&[e,t].every(a))return!1;var r=new Date(e.getTime()),n=new Date(t.getTime());return r.setHours(0,0,0,0),n.setHours(0,0,0,0),r.getTime()===n.getTime()}function o(e,t){for(var r;e;){if(r=e.querySelector("[data-dateType="+t+"]"))return r;e=e.parentNode}return null}function u(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(var r=!0,n=0;n<e.length;n++)r=r&&i(e[n],t[n]);return r}return{pad:t,dateToIso:r,fromString:n,compareDatesNoTime:i,compareDatesArrayNoTime:u,findClosestDatepicker:o}});
define("mixins/page-dates/DateTypeStore",["vanillajs","ta/Core/TA.Store","calendars/CalendarDate","mixins/page-dates/Utils"],function(e,t,n,r){"use strict";function i(e){var t=u(e);return 0==t.length?e:E[t[0]].children[0]}function a(e){var t=u(e);if(0==t.length)return e;var n=E[t[0]];return n.children[n.children.length-1]}function u(e){var t=[];for(var n in E)E.hasOwnProperty(n)&&E[n].children&&E[n].children.indexOf(e)>=0&&t.push(n);return t}function l(e){var t=ta.page.getDates(e);return t&&t[0]?new n(t[0]):null}var g="zu",E={CHECKIN:{queryString:null,pathString:null},CHECKOUT:{queryString:null,pathString:null},STAYDATES:{children:["CHECKIN","CHECKOUT"],queryString:"staydates",pathString:g+"s"},EATERY:{queryString:"eaterydate",pathString:g+"r"},DEPARTURE:{queryString:null,pathString:null},RETURN:{queryString:null,pathString:null},ROUNDTRIP:{children:["DEPARTURE","RETURN"],queryString:"rtdates",pathString:g+"t"},ONEWAYFLIGHT:{queryString:"oneway",pathString:g+"o"},LEG_1:{queryString:"leg1date",pathString:g+"1"},LEG_2:{queryString:"leg2date",pathString:g+"2"},LEG_3:{queryString:"leg3date",pathString:g+"3"},ATTRACTION:{queryString:"attrdate",pathString:g+"a"}};return E.isChildDateType=function(e){return u(e).length>0},E.isSingleDateType=function(e){var t=E[e];return!(E.isChildDateType(e)||t&&t.children&&t.children.length>0)},E.getParents=u,E.isHotelDateType=function(e){return u(e).indexOf("STAYDATES")>=0},E.isRoundTripDateType=function(e){return u(e).indexOf("ROUNDTRIP")>=0},E.isMultiCityDateType=function(e){return"LEG_1"==e||"LEG_2"==e||"LEG_3"==e},E.isStartDateType=function(e){var t=u(e);return 0!=t.length&&0==E[t[0]].children.indexOf(e)},E.isEndDateType=function(e){var t=u(e);if(0==t.length)return!1;var n=E[t[0]];return n.children.indexOf(e)==n.children.length-1},E.getStartDate=function(e){var t=i(e);return null==t?ta.page.getDates(e)[0]:ta.page.getDates(t)[0]},E.getEndDate=function(e){var t=a(e);return null==t?ta.page.getDates(e)[0]:ta.page.getDates(t)[0]},E.getMinEnabledDate=function(e){if(E.isHotelDateType(e)||E.isRoundTripDateType(e)){var i=t.retrieve("multiDP.minCheckInDate");if(i)return new n(r.fromString(i))}else{if("LEG_1"==e)return l("ONEWAYFLIGHT");if("LEG_2"==e)return l("LEG_1")||l("ONEWAYFLIGHT");if("LEG_3"==e)return l("LEG_2")||l("LEG_1")||l("ONEWAYFLIGHT")}return null},E.flattenType=function(e){var t=E[e];return t?t.children?t.children.slice(0):[e]:[]},E.getCorrespondingDateType=function(e){switch(e){case"CHECKIN":return"CHECKOUT";case"CHECKOUT":return"CHECKIN";case"DEPARTURE":return"RETURN";case"RETURN":return"DEPARTURE";default:return null}},E});
define("mixins/page-dates/picker-autopopper",["ta","mixins/page-dates/DateTypeStore","vanillajs"],function(e,t){"use strict";function r(e,t){for(;t;){if(e===t)return!0;t=t.parentNode}return!1}function a(a){e.page.on("dateSelected",function n(o,i,p){try{if(!r(document,a))return void e.page.off("dateSelected",n)}catch(e){require(["trjs!ta/util/Error"],function(t){t.record(e,"autopopper dateSelected - inDocument")})}try{if(!r(a,o))return}catch(e){require(["trjs!ta/util/Error"],function(t){t.record(e,"autopopper dateSelected - parentElement.contains")})}var u=t.getCorrespondingDateType(i);u&&(e.page.hasDates(u)&&t[i]!==t.DEPARTURE||setTimeout(e.page.gatherDates.bind(e.page,a.querySelector('[data-datetype="'+u+'"]'))))})}return{apply:a}});
define("utils/localstorage",["vanillajs"],function(t){function n(t){return r(t,"value")}function e(t){return r(t,"now")}function r(t,n){if(!n)return null;try{var e=JSON.parse(w.getItem(t)||"0");return e?e.ttl&&e.ttl+e.now<(new Date).getTime()?(w.removeItem(t),null):e.hasOwnProperty(n)?e[n]:null:null}catch(t){}return null}function o(t){try{w.removeItem(t)}catch(t){}}function u(t){try{var n=w.getItem(t);if(null!==n&&void 0!==n)return!0}catch(t){}return!1}function i(t,n,e){try{w.setItem(t,JSON.stringify({ttl:e||0,now:(new Date).getTime(),value:n}))}catch(t){}}function c(){var t=!1;try{if(w&&w.setItem)return w.setItem(h,y),t=w.getItem(h)!=y,w.removeItem(h),t&&(w=!1),!!w}catch(t){}return!1}function a(t){w=t,this.enabled=c()}function f(){return 1e9*Math.random()|0}function l(t,e,r){function u(){try{e()}finally{o(a)}}var c=t+"__MUTEX_x",a=t+"__MUTEX_y",f=function(){return n(a)};return i(c,d),f()?(r||setTimeout(function(){l(t,e)},0),!1):(i(a,d,40),n(c)!==d?(r||setTimeout(function(){f()!==d?setTimeout(function(){l(t,e)},0):u()},50),!1):(u(),!0))}function m(t,e,r,u){return function(){try{u()}finally{l(t,function(){if(n(e)!==r)throw t+" was locked by a different process while I held the lock";o(e)})}}}function s(t,e,r,o){r=r||5e3;var u=t+"__MUTEX",c=function(){return n(u)},a=d+":"+f(),v=function(){setTimeout(function(){s(t,e,r)},10)};if(c())return o||v(),!1;var w=m(t,u,a,e),h=l(t,function(){return c()?(o||v(),!1):(i(u,a,r),void(o||setTimeout(w,0)))},o);return!(!o||!h)&&(w(),!0)}function v(){var t=!1;try{window&&window.localStorage&&(t=window.localStorage)}catch(t){}a(t)}var w=!1,h="taLsTest",y="1",d=Date.now()+":"+f();return v(),{enabled:c(),get:n,set:i,remove:o,has:u,getTimeStamp:e,setStorage:a,lock:function(t,n,e){s(t,n,e,!1)},attemptLock:function(t,n,e){return s(t,n,e,!0)}}});

define("ta/Core/TA.LocalStorage",["vanillajs","common/trackingStreams","ns-exporter"],function(e,t,n){"use strict";var r=!1,i="taLsTest",o="1",a="TALocalStorageCurrentSessionId",s=!1,u="session-",c=!1,l=[],f=function(){return!(!s&&!c)},v=function(e){return!!f()||(t.error(null,"Accessing localStorage session cookie before session logic intialized: "+e),!1)},g=function(e){return S(e,"value")},m=function(e){return S(e,"now")},S=function(e,t){if(!t)return null;try{var n,i=JSON.parse(r.getItem(e)||"0");return i?i.ttl&&i.ttl+i.now<(new Date).getTime()?(r.removeItem(e),null):i.hasOwnProperty(t)?(r.setItem("512",i[t]),n=r.getItem("512"),r.removeItem("512"),n):null:null}catch(e){}return null},d=function(e){try{var t=JSON.parse(r.getItem(e)||"0");return t?t.ttl&&t.ttl+t.now<(new Date).getTime()?(r.removeItem(e),null):t.value:null}catch(e){}return null},w=function(e){try{r.removeItem(e)}catch(e){}},y=function(e){try{var t=r.getItem(e);if(null!==t&&void 0!==t)return!0}catch(e){}return!1},h=function(e,t,n){try{r.setItem(e,JSON.stringify({ttl:n||0,now:(new Date).getTime(),value:t}))}catch(e){}},I=function(e){if(c=!0,!e)return t.error(null,"Attempting to initialize localStorage with invalid sesion key: "+e),!1;if(!T())return!1;if(s=g(a),!s||s!=e){s=e,h(a,s);var n=g("latestPageServlet");n&&h("sessionEntryServlet",n),p(),y(a)&&require.defined("ta/Core/TA.Store")&&require("ta/Core/TA.Store").store("isFirstSessionPageView",!0)}},p=function(){try{var e=u+s,t=new RegExp("^"+u);if(r.length)for(var n=0;n<r.length;n++){var i=r.key(n);try{t.test(i)&&i!=e&&w(i)}catch(e){}}}catch(e){}},T=function(){try{if(r&&r.setItem){r.setItem(i,o);var e=r.getItem(i)!=o;return r.removeItem(i),e&&(r=!1),!!r}}catch(e){}return!1},O=function(e){try{r.setItem("session-"+s,JSON.stringify(e))}catch(e){}},k=function(){try{var e=r.getItem("session-"+s);if(e)return JSON.parse(e)}catch(e){}return{}},A=function(e){l.push(e)},E={enabled:T(),get:g,getObject:d,set:h,remove:w,has:y,getTimeStamp:m,updateSessionId:I,onSessionStorageChange:A,canUseSession:f,getSessionKey:function(e){if(!v(e))return null;var t=k();return t?t[e]:null},setSessionKey:function(e,t){if(v(e)){var n=k();n||(n={}),n[e]=t,O(n)}},removeSessionKey:function(e){if(v(e)){var t=k();t&&(delete t[e],O(t))}},hasSessionKey:function(e){if(!v(e))return!1;var t=k();if(t){var n=t[e];if(null!==n&&void 0!==n)return!0}return!1},setStorage:function(e){r=e,E.enabled=T()}};if("undefined"!=typeof window){var N=!1;try{N=window.localStorage}catch(e){}E.setStorage(N),function(){function e(e){if(e=e||window.event,s&&(!e.key||e.key==="session-"+s))for(var t=0,n=l.length;t<n;t++)l[t](e)}window.addEventListener?window.addEventListener("storage",e,!1):window.attachEvent&&window.attachEvent("onstorage",e)}()}return n.createNs(E,"ta","localStorage"),E});
define("ta/support/Qualtrics",["vanillajs","ns-exporter","page-model","ta/Core/TA.LocalStorage"],function(t,e,n,i){"use strict";var s={},r=function(t,e,n,i){this.get=function(t){for(var t=t+"=",e=document.cookie.split(";"),n=0,i=e.length;n<i;n++){for(var s=e[n];" "==s.charAt(0);)s=s.substring(1,s.length);if(0==s.indexOf(t))return s.substring(t.length,s.length)}return null},this.set=function(t,e){var n="",n=new Date;n.setTime(n.getTime()+6048e5),n="; expires="+n.toGMTString(),document.cookie=t+"="+e+n+"; path=/; "},this.check=function(){var i=this.get(n);if(i)i=i.split(":");else{if(100==t)return!0;"v"==e&&(t=Math.random()>=t/100?0:100),i=[e,t,0],this.set(n,i.join(":"))}var s=i[1];if(100==s)return!0;switch(i[0]){case"v":return!1;case"r":return s=i[2]%Math.floor(100/s),i[2]++,this.set(n,i.join(":")),!s}return!0},this.go=function(){if(this.check()){var t=document.createElement("script");t.type="text/javascript",t.src=i+"&t="+(new Date).getTime(),document.body&&document.body.appendChild(t)}},this.start=function(){var t=this;t.go()}};s.displaySurvey=function(t){var e=n.session.uid,i="QSI_S_"+t,s="//znbkpczkrl5wwqzj3-tripadvisor.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_SIID="+t+"&UID="+e+"&Q_LOC="+encodeURIComponent(window.location.href);try{new r(100,"r",i,s).start()}catch(t){}u(!0)};var a=2592e6,o=!1,c=!1,u=function(t){i&&i.enabled&&(t?(i.set("qualtrics-last-seen",Date.now()),o=!0):i.remove("qualtrics-last-seen"))};return s.hasShownInLastThirtyDays=function(){if(i&&i.enabled){var t=parseFloat(i.get("qualtrics-last-seen")),e=isNaN(t)?0:t,n=e<0?0:e+a;return Date.now()<n}return!0},s.seenThisPageView=function(){return o},s.canDisplay=function(){if(i&&i.enabled){var t=Number(i.get("qualtrics-page-views"));if(2===t&&!s.hasShownInLastThirtyDays())return!0;if(1===t&&!c&&!s.hasShownInLastThirtyDays())return!0}return!1},s.updatePageViews=function(){if(i&&i.enabled){var t=i.get("qualtrics-session-id"),e=n.session.sessionId;if(t&&t===e){var s=Number(i.get("qualtrics-page-views"))+1;i.set("qualtrics-page-views",s)}else i.set("qualtrics-session-id",e),i.set("qualtrics-page-views",1);c=!0}},e.exportTo(s,"ta.support.qualtrics"),s});
define("mixins/page-dates/pop-calendar",["ta","utils/localstorage","mixins/mixin","common/trackingStreams","ta/support/Qualtrics","vanillajs"],function(e,r,t,a,n){function s(e){g=!!e.popFromDefault,f=!!e.popFromUndated,v=!!e.datesWereDefaulted,h=e.popCalendarType,S=!!e.hasMetaMarketingDefaultDates,w=!!e.qualtricsSurveyEnabled,v&&r.enabled&&(r.has(l)&&r.get(l)>=0?r.set(l,r.get(l)+1):r.set(l,1),r.has(c)||r.set(c,{}))}function i(){if(!r||!r.enabled||r.get("dateHasBeenSelected")||m)return!1;if(sessionStorage.getItem("suppressCalendarPop"))return sessionStorage.removeItem("suppressCalendarPop"),!1;if(!h)return!1;if(w&&n&&(n.canDisplay()||n.seenThisPageView())){if(!require.defined("page-model"))return!1;if(require("page-model").isMobile)return!1}var t=r.get(c),a=r.get(l);switch(h){case"first":return 1===a;case"firstPerServlet":return t&&(!t[window.pageServlet]||0===t[window.pageServlet]);case"firstAndSecond":return a<=2;case"firstThree":return a<=3;case"firstFour":return a<=4;case"firstFive":return a<=5;case"firstAndThird":return 1===a||3===a;case"everyThird":return a%3===1;case"doNot":return!1;case"always":return!0;case"skipFirstPageview":return 1!=a}return g&&v||f&&!e.page.hasDates("STAYDATES")}function o(){return S}function d(t){e.page.gatherDates(t),m=!0,a.trackEvent("DATEPICKER","auto-popped-calendar-shown",window.pageServlet),a.trackEvent("calendar","in_view","autopop");var n=r.get(c)||{},s=n[window.pageServlet];n[window.pageServlet]=s?s+1:1,r.set(c,n)}function u(){return m}function p(){r.set("dateHasBeenSelected",!0),v=!1}var l="ddpageviews",c="ddservletpops",g=!1,f=!1,v=!1,w=!1,S=!1,h="",m=!1,D={init:s,shouldPop:i,shouldPopMetaMarketing:o,popCalendar:d,wasPoppedThisPageLoad:u,setUserEnteredDates:p};return t(D)});
define("mixins/page-dates/default-dates",["ta","utils/localstorage","mixins/mixin","mixins/Events","mixins/page-dates/pop-calendar","vanillajs"],function(e,a,t,n,d){"use strict";function i(e){return e&&u}function o(e){d.init(e),u=!!e.datesWereDefaulted}function s(a){function t(){n&&(i(n)&&require(["trjs!ta/Core/TA.Record"],function(e){e.trackEventOnPage("DATEPICKER","undated_to_default_dated")}),d.shouldPop()?(l.emit("popFromDefault"),d.popCalendar(n)):d.shouldPopMetaMarketing()&&d.popCalendar(n))}if(e.page.usingUnifiedDates){e.page.hasDates("STAYDATES")||e.page.clearDates("STAYDATES"),r=e.page.getDates("CHECKIN")[0],p=e.page.getDates("CHECKOUT")[0];var n=a.querySelector('[data-datetype="CHECKIN"]');e.page.on("dateSelected",function(t,o,s){var l,c=r&&p,g=e.page.getDates("STAYDATES")[0],D=e.page.getDates("STAYDATES")[1];a.contains(t)&&(!c&&e.page.hasDates("STAYDATES")?l="undated_to_manually_dated":g==r&&D==p||(d.setUserEnteredDates(),i(n)?(l="default_dated_to_manually_dated",u=!1):l="manually_dated_to_manually_dated")),r=g,p=D,l&&require(["trjs!ta/Core/TA.Record"],function(e){e.trackEventOnPage("DATEPICKER",l)})}),e.page.on("datepickerRejected",function a(){d.wasPoppedThisPageLoad()&&(l.emit("poppedCalendarDismissed"),e.page.off("datepickerRejected",a))}),"loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t()}}var r,p,u=!1,l={init:o,apply:s};return t(l,new n("popFromDefault"))});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"datepickers_desktop_horizontal_styleguide_icon","handlers",["handlers"]);t(["widget","vanillajs","api-mod","ta/Core/TA.Event","mixins/page-dates/picker-autopopper","mixins/page-dates/default-dates"],function(e,t,a,n,i,r){"use strict";function d(e,t){var n,i=e.getAttribute("data-dateFormat");n=t?ta.i18n.formatDate(i,t):e.getAttribute("data-emptyText"),a.find(".picker-inner .picker-label",e).firstChild.nodeValue=n}function l(t,n,i){return a.inDocument(e.element)?void("CHECKIN"===n?d(p,i[0]):"CHECKOUT"===n?d(u,i[0]):"STAYDATES"===n&&(d(p,i[0]),d(u,i[1]))):(ta.page.removeListener("dateSelected",l),p=null,void(u=null))}function o(e,t){if(e){var a=e.getParent(".calendarFlyout");if(a){var n=a.deferred,i=a.getElement(".calendarWrapper");if(n&&i)return n.reject(),void ta.page.gatherDates(e,i,t)}ta.page.gatherDates(e,null,t)}}var p=a.find("[data-datetype=CHECKIN]",e.element),u=a.find("[data-datetype=CHECKOUT]",e.element);return n.queueForLoad(function(){ta.page.on("dateSelected",l),i.apply(e.element),r.apply(e.element)},"datepicker widget handlers"),{onDatePickerClick:o}})});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"dual_search_dust","handlers",["deferred/lateHandlers","handlers"]);t(["placement","lib/jquery-amd","ta/Core/TA.Store","ta/Core/TA.Event","typeahead/TypeAhead.views"],function(e,t,r,o,a){function n(e,r){t("#"+e).on("click",function(e){0==t(e.target).closest("#"+r).length&&t("#"+r).focus()})}function i(){if(l.autoTooltip&&r.retrieve("isFirstSessionPageView")&&window.require){var e=["trjs!overlays/Overlay","trjs!overlays/position","trjs!overlays/styles/popover","trjs!overlays/options/maxWidth","trjs!overlays/options/repositionOnEvent"];require(e,function(e,t,r,o,a){var n=document.getElementById("SEARCH_BUTTON"),i=[t&&t.below&&t.below([],!1),r&&r(n,"below","dark small"," ",l.autoTooltip),o&&o(220),a&&a(window,"showingCookieConsentBanner")],s=new e(n,i);s&&s.show()})}}if(e.params&&"typeahead_to_store"in e.params){var s=e.params.typeahead_to_store;if(s)for(var d in s)s.hasOwnProperty(d)&&r.store(d,s[d])}n("GEO_SCOPE_CONTAINER","GEO_SCOPED_SEARCH_INPUT"),n("MAIN_SEARCH_CONTAINER","mainSearch");var l=r.retrieve("typeahead_dual_search_options");return document.activeElement===t("#GEO_SCOPED_SEARCH_INPUT")[0]?e.require(["trjs!deferred/lateHandlers"],function(e){e.whereFocused({type:"dummy"},document.activeElement)}):document.activeElement===t("#mainSearch")[0]?e.require(["trjs!deferred/lateHandlers"],function(e){e.whatFocused({type:"dummy"},document.activeElement)}):l&&l.autoTooltip&&o.queueForLoad(i,"dual_search auto tooltip"),{getOptions:function(){return l}}})});
require(["ta/p13n/placements"],function(e){var c=e.define.bind(e,"comscore","handlers",["handlers"]);c(["placement","ta/Core/TA.Event","vanillajs"],function(e,c){"use strict";c.queueForLoad(function(){var c=document.getElementById(e.id),o=c.querySelector(".dataHolder"),t=o.getAttribute("data-id"),n={c1:"2",c2:t,c3:"",c4:""};if("undefined"!=typeof COMSCORE)COMSCORE.beacon(n);else{window._comscore=window._comscore||[],window._comscore.push(n);var r=document.createElement("script");r.async=!0,r.src=("https:"==document.location.protocol?"https://sb":"http://b")+".scorecardresearch.com/beacon.js",c.appendChild(r)}},5,"comscore")})});
define("ta/util/openNewTab",["utils/browserutils","ta/Browser","ta/util/Cookie"],function(e,o,t){return function(n){var i;return o.isIE10Metro()||(i=e.ie&&!o.isIE9orHigher()?window.open(n,"_blank","location=yes,resizable=yes,menubar=yes,scrollbars=yes,toolbar=yes,width="+document.documentElement.clientWidth+",height="+document.documentElement.clientHeight):window.open(n,"_blank")),!i||i.closed||"undefined"==typeof i.closed?(t.setPIDCookie(38821),window.location=n,!1):i}});
define("ta/popups/CookieSettingsPanel",["ta/util/openNewTab","page-model"],function(e,n){return function(s){s&&s.stop();var o={en:451,en_UK:834,en_IE:835,en_ZA:2635,sv:720,no:721,da:1199,fr:1197,fr_BE:6409,fr_CH:6410,de:1201,de_AT:2719,de_CH:6431,el:1198,it:1202,it_CH:6432,es:1200,pl:1208,nl:1209,nl_BE:6411,fi:2968,hu:3049,cs:3128,sk:3233,pt_PT:13938,"default":451},i={en:8328,en_UK:8328,en_IE:8316,en_ZA:8324,sv:8322,no:8323,da:8310,fr:8312,fr_BE:8307,fr_CH:8326,de:8313,de_AT:8306,de_CH:8325,el:8314,it:8317,it_CH:8327,es:8321,pl:8319,nl:8318,nl_BE:8309,fi:8311,hu:8315,cs:8308,sk:8320,pt_PT:13939,"default":8328},t=n.isMobile?i:o,_=n.session&&n.session.posLocale&&t[n.session.posLocale]?t[n.session.posLocale]:t["default"],l="http://info.evidon.com/pub_info/"+_+"?v=1&nt=0";e(l)}});
require(["ta/p13n/placements"],function(n){var e=n.define.bind(n,"document_cookie_banner","handlers",["handlers"]);e(["placement","lib/jquery-amd","ta/util/Cookie","ta/Core/TA.Event","ta/popups/CookieSettingsPanel"],function(n,e,o,t,a){"use strict";t.queueForAfterLoad(function(){var i=e("#"+n.id);e(document.body).prepend(i),i.find("p span").on("click",function(){a()}),i.addClass("showing");var r=e("#smartbanner");r[0]&&i.addClass("smart-banner-top"),i.css({marginTop:-i.height()}).animate({marginTop:0},{duration:"long",complete:function(){t.fireEvent("showingCookieConsentBanner")}}),o.write("cookieconsent","1",o.ONE_HOUR)},"placement: document_cookie_consent")})});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"homepage_footer_pickers","handlers",["handlers"]);t(["widget","lib/jquery-amd","ta/Core/TA.Record"],function(e,t,o){"use strict";function a(t,o,a,r){t&&t.stopPropagation(),o.onclick=null,e.require(["trjs!styleguide/overlays/Flyout","trjs!overlays/support/widgets","trjs!overlays/support/remoteWidget","trcss!src/build/styleguide/ui_overlays/flyouts"],function(n,s,i){n(t,o,s(e),i(a,{},r))})}return{showPos:function(r,n){var s=t(e.element).find(".point_of_sale_data");a(r,n,"POS_PICKER",{pageFeature:s.data("page-feature")||window.pageFeature||"",localeCodes:s.data("locale-codes")||window.localeCodes||"",relativeUrl:document.location.pathname+(document.location.search||"")+(document.location.hash||"")});var i=s.data("currentLocale");o.trackEventOnPage("POS_PICKER","Open",i)},showCurrency:function(e,t){a(e,t,"CURRENCY_PICKER")}}})});
define("ta/util/ActionRecord",["vanillajs","ta/util/Deferred","utils/ajax","ns-exporter","ta/Core/TA.Record"],function(r,t,e,o,n){function a(r,o,a,i){var c=new t;a||(a={});var u={url:a.url||r,method:a.method||"get",data:{action:o},success:function(r){a.onSuccess&&a.onSuccess(r),c.resolve(r)},error:function(r){a.onFailure&&a.onFailure(r),c.reject(r)}};for(var d in a)if(a.hasOwnProperty(d)&&!u.hasOwnProperty(d))u[d]=a[d];else if("data"==d)for(d in a.data)a.data.hasOwnProperty(d)&&(u.data[d]=a.data[d]);if(i){var s=n._toEvtParams(i);for(d in s)s.hasOwnProperty(d)&&(u.data[d]=s[d])}return e(u),i&&n._trackEventAfterAjax(i),c.promise()}var i={record:function(r,t,e){return a("/ActionRecord",r,t,e)},recordPlus:function(r,t,e){return a("/ActionRecordPlus",r,t,e)},recordPid:function(r){new e("/ActionRecord?pid="+r)}};return o.exportTo(i,"ta.util.action"),i});
require(["ta/prwidgets"],function(e){var n=e.define.bind(e,"homepage_partner_footer_links","handlers",["handlers"]);n(["widget","lib/jquery-amd","ta/util/ActionRecord"],function(e,n,t){"use strict";n(e.element).on("click",".inlineLink",function(){var e=n(this).parent(".footerLink").data("trackAction");e&&t.record("Footer"+e)})})});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"homepage_social_footer_links","handlers",["handlers"]);t(["widget","lib/jquery-amd","ta/util/ActionRecord"],function(e,t,i){"use strict";t(e.element).on("click",".footerLink",function(){var e=t(this).data("trackAction");e&&i.record("Footer_"+e)})})});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"homepage_tripadvisor_footer_links","handlers",["deferred/HelpCenterOverlay","handlers"]);t(["widget","lib/jquery-amd","ta/util/Cookie","ta/util/ActionRecord"],function(e,t,r,i){"use strict";function n(e){var t=e?e.srcElement||e.target:null;t&&t.getAttribute("data-pid")&&r.setPIDCookie(t.getAttribute("data-pid"))}return t(e.element).on("click",'.js_click[data-id="help_center"]',function(){var r=this,i=t(r).data("url");e.require(["trjs!deferred/HelpCenterOverlay","trcss!src/build/required/help_center_overlay"],function(e){e.open(r,i)})}),t(e.element).on("click",".footerLink",function(e){var r="Footer_",n=t(this),a=n.data("trackAction");if(a){var o="_blank"==n.attr("target");n.is("a")&&!o?(e.preventDefault(),i.record(r+a).always(function(){window.location=n.attr("href")})):i.record(r+a)}}),{checkForPid:n}})});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"homepage_tripadvisor_horizontal_footer_links","handlers",["handlers"]);t(["widget","lib/jquery-amd","ta/popups/CookieSettingsPanel","ta/util/ActionRecord"],function(e,t,i,o){"use strict";t(e.element).on("click",'.js_click[data-id="cookie-consent"]',function(){i()}),t(e.element).on("click",".footer_link",function(e){var i=t(this),n="Footer_",r=i.data("trackAction");r&&(i.is("a")&&(e.preventDefault(),o.record(n+r).always(function(){window.location=i[0].href})),o.record(n+r))})})});
require(["ta/prwidgets"],function(e){var n=e.define.bind(e,"homepage_pos_picker","handlers",["handlers"]);n(["widget","lib/jquery-amd","ta/util/Cookie","ta/util/ActionRecord"],function(e,n,i,t){"use strict";function o(i){var o=n(i).data("id"),r=n(e.element).find(".picker_dropdown").data("currentLocale");t.record("POS_PICKER_SELECT_POS_"+o+"_FROM_"+r).always(function(){window.location=i.href})}function r(){i.remove("TAPD","/",window.domain)}var a=n(".fixed_header",n(e.element));n(e.element).before(a);var d=n(e.element).find(".pos_item.selected")[0];d&&d.scrollIntoView(),n(e.element).on("click",".pos_link",function(e){e.preventDefault(),r(),o(this)})})});
define("ta/util/Currency",["vanillajs","ta/util/Cookie","common/trackingStreams","ns-exporter"],function(r,n,t,e){var o={},a="‏",i="؜",u=" ",c="‎";return o.formatCurrency=function(r,n,t,e){var a=n?n:"USD",i=window.currencySymbol[a],f=r;e||(f=o.formatThousands(Math.round(r)));var s=i[0],l=i[1],y=document.body.classList;return y.contains("lang_ar")?o.isCurrencyAbbreviation(s)?f+u+s+c:s+c+u+f:t?l?f+u+s:s+u+f:l?f+s:s+f},o.formatCurrencyRange=function(r,n,t,e){var c,f=document.body.classList;return c=f.contains("lang_ar")?u+"-"+i+u:ta.util.i18n.isRtl()?u+"-"+a+u:u+"-"+u,e?(r=o.formatCurrency(r,t,!0),n=o.formatCurrency(n,t,!0),r+c+n):(r=o.formatCurrency(r,t),n=o.formatCurrency(n,t),r+c+n)},o.isCurrencyAbbreviation=function(r){return/^[a-zA-Z]+[^a-zA-Z0-9]?$/i.test(r)},o.formatThousands=function(r){if("undefined"==typeof groupingSize||"undefined"==typeof groupingSeparator||groupingSize<1)return r;for(var n="",t=""+r,e=1;e<=t.length;e++)n=t.charAt(t.length-e)+n,e%groupingSize==0&&e<t.length&&(n=groupingSeparator+n);return n},o.setCurrencyAndReload=function(r,e){var o="SetCurrency";n.write(o,r,15e3),e=e?e+"|":"",t.trackEvent("CurrencyPicker","Select",e+r),location.reload(!0)},e.exportTo(o,"ta.util.currency"),o});
require(["ta/prwidgets"],function(e){var r=e.define.bind(e,"homepage_currency_picker","handlers",["handlers"]);r(["widget","lib/jquery-amd","ta/util/Currency"],function(e,r,n){"use strict";function t(t){var d=r(e.element).find(".picker_dropdown").data("currentCurrency");n.setCurrencyAndReload(t,d)}var d=r(".fixed_header",r(e.element));return r(e.element).before(d),{setCurrencyAndReload:t}})});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"global_footer","handlers",["handlers"]);n(["placement","vanillajs","utils/ajax"],function(e,n,t){return{getFullDisclaimerText:function(e){t({url:"/TAMGFooterAjax",success:function(n){e.parentElement&&(e.parentElement.innerHTML=n)},data:{"a":"SHOW_FULL_DISCLAIMER"},evalScripts:!0,method:"get"})}}})});
define("common/Radio",["vanillajs"],function(){function t(t){this.channel=t,this.events={},this.replies={}}var e={},n=/\s+/;return t.prototype.reply=function(t,e,r){return t.split(n).forEach(function(t){this.replies[t]||(this.replies[t]=[]),this.replies[t].push({callback:e,context:r||this})},this),this},t.prototype.request=function(t){if(!this.replies[t])return null;var e=[].slice.call(arguments,1),n=this.replies[t];return n=n[n.length-1],n.callback.apply(n.context,e)},t.prototype.requestMany=function(t){if(!this.replies[t])return null;var e=[].slice.call(arguments,1);return this.replies[t].map(function(t){return t.callback.apply(t.context,e)})},t.prototype.requestAll=function(t,e){if(!this.replies[t])return!0;var n=[].slice.call(arguments,1),r="function"==typeof e?e:function(t){return t===e};return this.replies[t].reduce(function(t,e){return t&&r(e.callback.apply(e.context,n))},!0)},t.prototype.requestEvery=t.prototype.requestAll,t.prototype.requestAny=function(t,e){if(!this.replies[t])return!1;var n=[].slice.call(arguments,1),r="function"==typeof e?e:function(t){return t===e};return this.replies[t].reduce(function(t,e){return t||r(e.callback.apply(e.context,n))},!1)},t.prototype.requestSome=t.prototype.requestAny,t.prototype.on=function(t,e,r){return t.split(n).forEach(function(t){this.events[t]||(this.events[t]=[]),this.events[t].push({callback:e,context:r||this})},this),this},t.prototype.once=function(t,e,r){return t.split(n).forEach(function(t){this.events[t]||(this.events[t]=[]),this.events[t].push({callback:e,context:r||this,single:!0})},this),this},t.prototype.one=t.prototype.once,t.prototype.off=function(t,e){return t.split(n).forEach(function(t){this.events[t]&&(this.events[t]=this.events[t].filter(function(t){return e&&t.callback!=e}))},this),this},t.prototype.trigger=function(t){if(this.events[t]){var e=[].slice.call(arguments,1);return this.events[t]=this.events[t].filter(function(t){return t.callback.apply(t.callback,e),!t.single}),this}},t.prototype.emit=t.prototype.trigger,function(n){return e[n]||(e[n]=new t(n))}});
require(["ta/p13n/placements"],function(e){var o=e.define.bind(e,"global_nav","handlers",["deferred/lateHandlers","handlers"]);o(["placement","lib/jquery-amd","common/Radio"],function(e,o,n){"use strict";function t(){var e=o(window).scrollTop(),n=o(".persistent-icons",r),t=o(".global-nav-icons",n);if(t.length){var a=(o(".global-nav-logo"),o('[data-placement-name="global_nav_geopill"]'));if(a.is(":visible")){var s=r.height()-e;e<=0&&t.css({"position":"absolute","top":0}),s>0&&(e>0&&e<=50?t.css({"position":"absolute","top":e,"bottom":"auto"}):s<=50&&t.css({"position":"absolute","top":"auto","bottom":0}))}}}function a(){var e=o(".second-view",r),n=o(window).scrollTop(),t=o(".persistent-icons",r),a=o(".global-nav-icons",t);if(a.length){var s=o(".global-nav-mobile-web-rollout"),i=o(".global-nav-logo",s),l=o('[data-placement-name="global_nav_geopill"]');i.css({"display":"block"}),e.length&&l.is(":visible")&&(n=t.height()-i.height(),window.scroll(0,n),a.css({"position":"absolute","top":"auto","bottom":0}))}}function s(){var e=o(".global-nav-persistent",r);e.length&&e.toggleClass("fixed",o(window).scrollTop()>r.offset().top)}var r=o("#"+e.id),i=n("global-nav"),l=null,v=null;i.on("run-my-trips-test-3",function(){d(!1,!0)});var c=function(e){window.userLoggedIn=!0;var n=o("<div>").append(r.find(".global-nav-no-refresh"));r.html(e),r.find(".global-nav-no-refresh").each(function(e,t){o(t).replaceWith(n.find("#"+t.getAttribute("id"))[0])}),l&&l.hide("replace-el")}.bind(r),u=function(){return{skipLocation:e.location_id<=0,returnTo:document.location.pathname+(document.location.search||"")+(document.location.hash||"")}};o(document).on("regOverlay:success",function(){e.requestAJAXPlacement(c,null,u())}),r.on("mouseenter",".global-nav-links-container [data-element]",function(e){var n=o(this),t=n.find("a").first();l&&l.hide("new-overlay");var a=r.find(n.data("element")).clone();if(a.length){var s=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnMouseAway","trjs!overlays/position","trjs!overlays/options/destroyOnHide"];require(s,function(s,i,v,c,u){var d=new s(n[0],new i(a[0],"global-nav-flyout global-nav-menu"),v,c.bottomRight([0,1]),u);d.domParent=r.find(".global-nav-overlays-container")[0],d.show(),t.attr("data-active-menu-trigger",!0),o(e.currentTarget).find(".ui_tab").addClass("hovering"),d.on("hide",function(){t.removeAttr("data-active-menu-trigger"),o(e.currentTarget).find(".ui_tab").removeClass("hovering")}),l=d})}}),r.on("mouseenter",".expandSubItem",function(e){var n=o(this);if(!n.hasClass("active")){n.addClass("active"),n.siblings(".expandSubItem").removeClass("active");var t=n.find(".secondSubNav").clone(),a=n.parents(".ui_overlay"),s=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnMouseOut","trjs!overlays/options/destroyOnHide"];require(s,function(e,o,s,r){var i=new e(n[0],new o(t[0]),s,r);i.domParent=a[0],t.css("display","block"),i.show()})}}),r.on("mouseenter",".global-nav-links-ellipsis",function(e){var n=o(this);l&&l.hide("new-overlay");var t=r.find(".global-nav-links-container li"),a=t.filter(":hidden"),s=t.filter(function(e,n){return o(n).offset().top>t.offset().top}),i=o().add(a).add(s).clone(),v=r.find(".global-nav-links-menu-more").clone();v.prepend(i);var c=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnMouseAway","trjs!overlays/position","trjs!overlays/options/destroyOnHide"];require(c,function(e,o,t,a,s){var i=new e(n[0],new o(v[0],"global-nav-flyout global-nav-menu"),t,a.bottomRight([0,1]),s);i.domParent=r.find(".global-nav-overlays-container")[0],i.show(),n.find(".ui_tab").addClass("hovering"),i.on("hide",function(){n.find(".ui_tab").removeClass("hovering")}),l=i})}),r.on("click","#global-nav-HelpDesk",function(e){e.preventDefault();var o=this,n=["trjs!overlays/Overlay","trjs!overlays/styles/modal","trjs!overlays/options/closeOnEscape","trjs!overlays/position","trjs!overlays/options/closeOnDocClick","trjs!overlays/options/ajax","trcss!src/build/required/help_center_overlay"];require(n,function(e,n,t,a,s,r,l){var v=new e(o,[n(null,"","help_center"),t,a.cssCentered(),s,r("/uvpages/helpCenterOverlay.html")]);v.show(),i.emit("overlay-show")})}),r.on("click",".masthead-saves",function(e){v?(l&&l.hide("new-overlay"),v&&v.destroy()&&(v=null),require(["trjs!ta/Core/TA.Record"],function(e){e.trackEventOnPage("TopNav","mytrips_dropdown_cancel")})):(d(!1,!1,e.currentTarget),o(e.currentTarget).find(".ui_icon").addClass("hovering"))});var d=function(e,n,t){l&&l.hide("new-overlay");var a=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnDocClick","trjs!overlays/position","trjs!overlays/options/destroyOnHide","trjs!overlays/options/autoReposition","trjs!ta/Core/TA.Record"];require(a,function(a,s,i,c,u,d,f){var y=new a(o(".masthead-saves")[0],new s("","global-nav-flyout global-nav-utility trips-flyout-container"),i.withoutTouchEvents,c.bottomLeft([-20,-3]),u,d);y.domParent=r.find(".global-nav-overlays-container")[0],y.show(),r.find(".trips-flyout-container").addClass("hide-arrow"),l=y,require(["trdust!masthead-saves-dust","trdust!styleguide-dust","trjs!masthead-saves","trcss!masthead-saves"],function(a,s,i){setTimeout(function(){v=new window.MastheadSavesApp,v.start({inCreateTripFlow:e,runTest3:n}),y.on("hide",function(e){v&&v.destroy()&&(v=null),f.trackEventOnPage("TopNav","mytrips_dropdown_cancel"),t&&o(t).find(".ui_icon").removeClass("hovering")}),r.find(".trips-flyout-container").removeClass("hide-arrow")},0)})})}.bind(r);return r.on("click",".global-nav-utility-activator",function(e){var n=o(this),t=r.find(n.data("element")).clone();if(t.length){if(l){if(l.sourceElement==this)return void(l.isOpen()?l.hide("close"):l.show());l.hide("new-overlay")}t=t.clone();var a=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnDocClick","trjs!overlays/position","trjs!overlays/options/autoReposition"];require(a,function(a,s,i,v,c){var u=new a(n[0],new s(t[0],"global-nav-flyout global-nav-utility"),i,v.bottomLeft([-20,-3]),c);u.domParent=r.find(".global-nav-overlays-container")[0],u.show(),n.addClass("menu-open"),o(e.currentTarget).find(".ui_icon").addClass("hovering"),u.on("hide",function(){n.removeClass("menu-open"),o(e.currentTarget).find(".ui_icon").removeClass("hovering")}),l=u})}}),r.on("click",".global-nav-logo",function(){require(["trjs!ta/Core/TA.Record"],function(e){e.setEvtCookie("TopNav_"+window.pageServlet,"click","TAlogo",0,"/Home")})}),a(),o(window).scroll(function(){require(["trjs!utils/throttle"],function(e){e(t(),0),e(s(),100)})}),{checkForPersistentIcons:t,checkForPersistentGlobalNav:s}})});
require(["ta/p13n/placements"],function(a){var n=a.define.bind(a,"global_nav_action_cart","handlers",["handlers"]);n(["placement","lib/jquery-amd"],function(a,n){"use strict";var e=n("#"+a.id);e.on("click","a.shopping-cart-link",function(){var a=n(this).data("tracking-label");require(["trjs!ta/Core/TA.Record"],function(n){n.trackEventOnPage("TopNav_"+window.pageServlet,"click",a)})})})});
require(["ta/p13n/placements"],function(e){var r=e.define.bind(e,"global_nav_action_profile","handlers",["handlers"]);r(["placement","lib/jquery-amd"],function(e,r){"use strict";var t=r("#"+e.id),a=null;t.on("click","a.login-button",function(e){a&&a.hide("replace-el");var t=r(".core-login-button").data("flowName");"VIATOR_COMBINED"===t?(require("ta/registration/RegOverlay").show(e,e.target,{flow:t,pid:40102,userRequestedForce:"true",locationId:require("page-model").GEO_ID}),e.preventDefault()):(require("ta/registration/RegOverlay").show(e,e.target,{flow:t,pid:427,userRequestedForce:"true"}),e.preventDefault())});var n=function(e,t){var a=r(e).data("trackingLabel");require(["trjs!ta/Core/TA.Record"],function(r){/\/#\s*$/.test(e.href)||"_blank"==e.target?r.trackEventOnPage(t,"click",a):r.setEvtCookie(t,"click",a,0,e.href)})};t.on("click",".global-nav-profile-menu a.subLink[data-tracking-label], .sidebar-nav-profile a.subLink[data-tracking-label]",function(){n(this,"UtilityNav")}),t.on("click","[data-track-profile-dropdown-open]",function(){var e=require("page-model").session.loggedIn?"Signed_in_profile_dropdown":"Signed_out_profile_dropdown";require(["trjs!ta/Core/TA.Record"],function(r){r.trackEventOnPage("UtilityNav","open",e)})})})});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"global_nav_action_trips","handlers",["handlers"]);t(["placement","lib/jquery-amd","api-mod","page-model","common/Radio","ta/Core/TA.Record","utils/localstorage"],function(e,t,n,o,a,i,l){"use strict";var r=t('[data-placement-name="global_nav_menus"]'),s=a("global-nav"),d=null,u={},c=t("#"+e.id),y=(c.find(".my-trips-dropdown-test"),c.find(".my-trips-dropdown-control"),c.find(".quick-save-test")),f="my-trips-dropdown-test-overlay",p="my_trips_educational_flyout",v=require("page-model").JS_SECURITY_TOKEN,m=require("page-model").session.pageServlet,g=function(e){t.ajax({type:"GET",url:"/data/1.0/trips/item",data:{limit:2},beforeSend:function(e){e.setRequestHeader("X-Requested-By",v)},success:e})},h=function(e){return(new Date).getTime()-e<2592e6},_=function(n){var o=["overlays/position","overlays/styles/flyout","overlays/options/destroyOnHide","overlays/options/autoReposition","overlays/options/fade"],a=function(e,t,o,a,i){return[new t(n[0],"global-nav-flyout global-nav-utility my-trips-dropdown-test-flyout"),e.bottomLeft([-20,-3]),o,a,i(i.SHORT,!0,!0)]};n.on("click",".ui_close_x",function(){s.trigger("hide-overlays",f)}),s.trigger("show-overlay",f,t("#"+e.id).find(".masthead-saves")[0],o,null,a)},w=function(){return t.find(".ui_notification_container").length||t.find(".ui_overlay").length||t.find("#qual_ol").length},b=function(){setTimeout(function(){!w()&&y.length>0&&l.has(p)&&!l.get(p)&&0==n.scrollTop()&&(_(y),l.set(p,!0),i.trackEventOnPage(p,"flyout_shown",m,0,!1))},1e3)};s.on("hide-overlays",function(e){e?u[e]&&u[e].hide("hide-overlay")&&(u[e]=null):d&&d.hide("replace-el")}),s.on("show-overlay",function(e,t,n,o,a){d&&d.hide("new-overlay");var i=["trjs!overlays/Overlay"].concat(n);require(i,function(n){var i=a.apply(null,[].slice.apply(arguments,1)),l=new n(t,i);l.domParent=r.find(".global-nav-overlays-container")[0],l.show(),o&&o(l),d=l,e&&(u[e]=l)})}),s.on("run-quick-save-test",function(){l.has(p)||g(function(e){e.data&&(e.data.length<=1||!h(e.data[1].date))&&(l.set(p,!1),b())})}),l.enabled&&("complete"===document.readyState?b():t(window).ready(b))})});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"global_nav_geopill","handlers",["deferred/GeoSearch","handlers"]);n([],function(){})});
require(["ta/p13n/placements"],function(a){var n=a.define.bind(a,"global_nav_links","handlers",["handlers"]);n(["placement","lib/jquery-amd"],function(a,n){"use strict";var t=n("#"+a.id),e=n('[data-placement-name="global_nav_links"]'),i=function(a,t){var e=n(a).data("trackingLabel");require(["trjs!ta/Core/TA.Record"],function(n){/\/#\s*$/.test(a.href)||"_blank"==a.target?n.trackEventOnPage(t,"click",e):n.setEvtCookie(t,"click",e,0,a.href)})};e.on("click","a.global-nav-link[data-tracking-label]",function(){i(this,"TopNav")}),e.on("click","a.subLink",function(){var a=n("[data-active-menu-trigger][data-tracking-label]",t);a.data("trackingLabel")+"_sublink";i(this,"TopNav")})})});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"masthead_search","handlers",["deferred/lateHandlers","handlers"]);t(["placement","ta/Core/TA.Store"],function(e,t){function r(){if(e.params&&"typeahead_to_store"in e.params){var r=e.params.typeahead_to_store;if(r)for(var n in r)r.hasOwnProperty(n)&&t.store(n,r[n])}}r();var n=t.retrieve("typeahead_dual_search_options");return document.activeElement===document.getElementById("GEO_SCOPED_SEARCH_INPUT")?e.require(["trjs!deferred/lateHandlers"],function(e){e.whereFocused({type:"dummy"},document.activeElement)}):document.activeElement===document.getElementById("mainSearch")&&e.require(["trjs!deferred/lateHandlers"],function(e){e.whatFocused({type:"dummy"},document.activeElement)}),{getOptions:function(){return n}}})});
require(["ta/rollupAmdShim"],function(a){a.install(["amdloaders","remoteModule"],[])});if(window.requirejs&&requirejs.taConfig){requirejs.taConfig({deferred:{},name:"core-amd",files:{"js-amd":{src:{amdloaders:1,remoteModule:1}}},_:{baseUrl:"/"}})};
define("remoteModule",["vanillajs"],function(){"use strict";function t(t,e){return null==t?null:t.getAttribute("data-"+e)}function e(t,e){for(;t&&t!==document.body;){if(t.getAttribute(e))return t;t=t.parentNode}return null}function r(e,r,n,i,u){var a=t(e,r);return a?a.replace(/\$plc:/g,"$prp/"+n+"/").replace(/\$prw:/g,"$prw/"+i+"/").split(",").filter(function(t){return!!t.length}).reduce(function(t,e){return t.concat(u.map(function(t){var r="trdust!"===t&&e.indexOf("/")<0;return t+e+(r?"-dust":"")}))},[]):[]}var n={};return function(i,u){var a=[].slice.call(arguments),l=(t(u,"load-init")||t(u,"load-js")).split("."),s=l.shift(),d=l.shift();if(!(n[s]&&n[s].indexOf(u)>=0)){if(require.defined(s)){var c=require(s);return void(d?c[d]:c).apply(c,a)}(n[s]||(n[s]=[])).push(u);var f=e(u,"data-placement-name"),p=e(u,"data-prwidget-name"),o=t(f,"placement-name"),h=t(p,"prwidget-name"),m=[].concat(r(u,"load-all",o,h,["trjs!","trcss!","trdust!"]),r(u,"load-js",o,h,["trjs!"]),r(u,"load-css",o,h,["trcss!"]),r(u,"load-dust",o,h,["trdust!"]));/^\$plc:/.test(s)?(a.unshift(m),a.unshift(s.substr(5)+"."+d),a.unshift(f.getAttribute("id")),a.unshift("evCall"),a.unshift("ta/p13n/placements"),requireCallLast.apply(window,a)):/^\$prw:/.test(s)?(a.unshift(s.substr(5)+"."+d),a.unshift("call"),a.unshift("ta/prwidgets"),requireCallLast.apply(window,a)):require(m,function(){n[s]=n[s].filter(function(t){return t!=u});var t=require(s);(d?t[d]:t).apply(t,a)})}}});
if("undefined"==typeof ta)var ta={};var api=function(){null==window.IS_DEBUG&&(window.IS_DEBUG=!1),null==window.VERSION_MAP&&(window.VERSION_MAP={}),null==window.CDNHOST&&(window.CDNHOST="");var e={overlays:{},maps:{},bmaps:{},common:{},phac:{},servlet:{},support:{},util:{},widgets:{},commerce:{},mobfull:{},photos:{},media:{},hac:{filters:{}},t4b:{},api:{maps:{}},p13n:{},registration:{},meta:{}};e.id=function(n){try{return document.id(n)}catch(n){e.util.error&&e.util.error.record(n,"ta.id failed")}},e.select=function(){var e=Array.from(arguments),n=e.length>1&&("string"==typeof e[0]?e.pop():e.shift())||document,t=e.shift();return Slick.search(n,t,new Elements)};var n=e;return n.extend=function(){var e,n,t,r,o,i,a=arguments[0]||{},u=1,l=arguments.length,f=!1;for("boolean"==typeof a&&(f=a,a=arguments[u]||{},u++),"object"==typeof a||isFunction(a)||(a={});u<l;u++)if(null!=(e=arguments[u]))for(n in e)t=a[n],r=e[n],a!==r&&(f&&r&&(isPlainObject(r)||(o=isArray(r)))?(o?(o=!1,i=t&&isArray(t)?t:[]):i=t&&isPlainObject(t)?t:{},a[n]=extend(f,i,r)):void 0!==r&&(a[n]=r));return a},n.fireEvent=function(e,n,t){return e&&$(e).fireEvent(n,t)},n.addEvent=function(e,n,t){return e&&$(e).addEvent(n,t)},n.removeEvent=function(e,n,t){return e&&$(e).removeEvent(n,t)},n.removeEvents=function(e,n){return e&&$(e).removeEvents(n)},n.createElement=function(e,n){return new Element(e,n)},n.getSize=function(e){return e&&$(e).getSize()},n.getPosition=function(e,n){return e&&$(e).getPosition(n)},n.addClass=function(e,n){return e&&$(e).addClass(n)},n.removeClass=function(e,n){return e&&$(e).removeClass(n)},n.toggleClass=function(e,n,t){return e&&$(e).toggleClass(n,t)},n.hasClass=function(e,n){return e&&$(e).hasClass(n)},n.find=function(e,n){return $(n||document).getElement(e)},n.findAll=n.select,n.parent=function(e,n){return e&&$(e).getParent(n)},n.setStyle=function(e,n,t){return e&&$(e).setStyle(n,t)},n.mixin=function(e){return Array.prototype.slice.call(arguments,1).forEach(function(e){for(var n in e)this[n]=e[n]},e),e},n.merge=function(e){for(var n=Array.prototype.slice.call(arguments,1),t=0,r=n.length;t<r;t++)for(var o in n[t])n[t].hasOwnProperty(o)&&(e[o]=n[t][o]);return e},n.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},n.stopEvent=function(e){return e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,e.preventDefault?e.preventDefault():e.returnValue=!1),!1},window.define&&define("ta",[],function(){return e}),n}();api.merge(ta,api);var ifdefNN=function(e){return"undefined"!=typeof e&&null!==e};
require(["ta/rollupAmdShim"],function(a){a.install([],["ta","ta","ta"])});
define("overlays/options/closeOnEscape",["vanillajs","api-mod"],function(n,e){"use strict";function o(n){27===n.keyCode&&(n.preventDefault(),this.hide("escape"))}var t=function(){var n=e.bind(o,this);this.on("show",function(){e.addEvent(document,"keydown",n)}).on("hide",function(){e.removeEvent(document,"keydown",n)})};return t});
define("overlays/options/repositionOnEvent",["vanillajs","api-mod"],function(n,i){"use strict";function t(){this.emit("positionDirty")}return function(n,o){return function(){var e=o.splice?o:[o],c=i.bind(t,this);this.on("show",function(){e.forEach(function(t){i.addEvent(n,t,c)})}).on("hide",function(){e.forEach(function(t){i.removeEvent(n,t,c)})})}}});
define("overlays/options/autoReposition",["vanillajs","overlays/options/repositionOnEvent"],function(o,n){return n(window,["resize","scroll"])});
define("utils/AjaxData",["ta","mixins/Events","lib/jquery-amd"],function(t,e,n){"use strict";function i(){}function a(t){function a(){return null!==s||null!==l}function r(){var t=a(),e=d,n=l;if(d=null,s=null,l=null,null!==n)try{n.abort()}catch(t){}return null!==e&&clearTimeout(e),t}function o(){var t=s;if(s=null,t){var e;t.success=function(n){l==e&&(l=null,v&&(y=n),f.data=n,f.error=void 0,f.dataVersion=++p,h(f,e,t.data),u.emit("update"))},t.error=function(n,i,a){l==e&&(l=null,f.data=y,f.dataVersion=++p,f.error={type:i,error:a,status:n.status,responseText:n.responseText},h(f,e,t.data),u.emit("update"))},e=c(t),l=e,u.emit("update")}}t=t||{};var u=new e("update"),d=null,s=null,l=null,f=this,p=0,c=t.ajaxFunc||n.ajax,h=t.transformer||i,m=t.dataType||"html",v=!!t.holdData,y=void 0;this.dataVersion=0,this.on=u.on.bind(u),this.off=u.off.bind(u),this.removeListener=u.removeListener.bind(u),this.isDone=function(){return!a()},this.isBusy=function(){return a()},this.clear=function(){var t=a()||"undefined"!=typeof this.data||"undefined"!=typeof this.error;r(),y=void 0,f.data=void 0,f.error=void 0,f.dataVersion=0,h(f),t&&u.emit("update")},this.refresh=function(t,e,n,i,a){r(),(!i||i<0)&&(i=0),s={type:t,url:e,data:n,dataType:m,xhrFields:{withCredentials:!0}},"undefined"!=typeof a&&(s.timeout=a),d=setTimeout(o,i),f.error=void 0,v||(f.data=void 0,h(f)),u.emit("update")},this.postJson=function(t,e,n,i){r(),n=n||0,n<0&&(n=0),s={beforeSend:function(t){t.setRequestHeader("Content-Type","application/json")},type:"POST",url:t,contentType:"application/json",data:JSON.stringify(e),dataType:m,xhrFields:{withCredentials:!0}},"undefined"!=typeof i&&(s.timeout=i),d=setTimeout(o,n),f.error=void 0,v||(f.data=void 0,h(f)),u.emit("update")}}return a});
define("overlays/ajaxUtil",["vanillajs","ta","utils/object/shallow-copy","utils/AjaxData","mixins/Events","overlays/loading-spinner","utils/resourceLoader"],function(e,t,r,a,n,i,o){"use strict";function s(e,t){var r,a=[];for(r in t)t[r]&&a.push(r);a.sort();for(var n=e,i=n.indexOf("?")>=0?"&":"?",o=0;o<a.length;++o)r=a[o],n+=i+encodeURIComponent(r)+"="+encodeURIComponent(String(t[r])),i="&";return n}function d(){for(var e=0,t={},r=[],a=h.length-1;a>=0;--a){var n=h[a],i=p[n];i&&!t[n]&&(i.hasClients()||++e<=f)&&(t[n]=i,r.push(n))}return r.reverse(),p=t,h=r,g=h.length+f,h}function u(e,i){function s(){var e=t.page.datesToQueryString("STAYDATES");if(e&&c!==e){c=e,d();for(var r=h.length-1;r>=0;--r){var a=p[h[r]];a.needsTravelInfo&&a.invalidate()}}}function u(e,r,a,n,i,d){if(n=n&&t.page&&t.page.usingUnifiedDates){var u=t.page.datesToQueryString("STAYDATES");u&&(r+="&"+u),m||(m=!0,c=u,t.page.on("dateSelected",s))}if(i>1){if(i>20)return;r+="&reqNum="+i,d>=0||(d=2e3)}else d=0;a?e.refresh("POST",r,a,d):e.refresh("GET",r,void 0,d),o.load(g,function(){T=!0,l()})}function l(){if(S.isBusy()||!T)return x&&clearTimeout(x),void(x=void 0);if(!S.data)return void(0!==S.dataVersion?A.error&&A.error===S.error||(A.error=S.error||"no content",x=x||setTimeout(f,0)):0!==I&&(j=E,I=S.dataVersion,L=[],C.hasListeners("update")&&(x=x||setTimeout(f,0))));if(I!==S.dataVersion){try{var e=document.createElement("div");e.innerHTML=S.data;var t=b,r=document.head||document.getElementsByTagName("head")[0];L=[],i.noScript||Array.prototype.forEach.call(e.querySelectorAll("script"),function(e){if(t){var a=document.createElement("script");a.setAttribute("type","text/javascript"),e.src&&(a.src=e.src),e.text&&(a.text=e.text),a.setAttribute("data-rup",e.getAttribute("data-rup")),r.appendChild(a),e.src||r.removeChild(a)}e.parentNode.removeChild(e)}),Array.prototype.forEach.call(e.querySelectorAll("style"),function(e){t?r.appendChild(e):e.parentNode.removeChild(e)}),Array.prototype.forEach.call(e.querySelectorAll("[data-targetEvent]"),function(e){L.push(e),e.parentNode.removeChild(e)}),t&&(b=!1,v[i.inlineResourceId]=!0),j=e.innerHTML,I=S.dataVersion,S.data=void 0}catch(e){A.error="invalid HTML"}x=x||setTimeout(f,0)}}function f(){var t,r=!C.hasListeners("update");for(x=void 0,A.data=j,A.dataVersion=I,C.emit("update");t=L.shift();){var a=t.getAttribute("data-targetEvent");if("repoll-required"===a){if(r)return L=[],A.data=j=E,void(A.dataVersion=I=0);++V>1||(V=2);var n=Number(t.getAttribute("data-delay"));u(S,e,i.reqParams,q,V,n)}else if("offerClickTrackingTree"===a)try{var o=require("commerce/impression-tracker");o&&o.onTrackingTreeElement(t)}catch(e){}else C.emit("data-targetEvent",a,t)}}var g,T,A=this,S=new a({dataType:"html",ajaxFunc:i.ajaxFunc}),C=new n("update","data-targetEvent"),E=i.loadingContent||y,b=!1,q=!!i.sendTravelInfo,x=void 0,j=E,I=S.dataVersion,L=[],V=0;this.error=void 0,this.loadingData=E,this.data=j,this.dataVersion=I,this.needsTravelInfo=q,this.on=C.on.bind(C),this.off=C.off.bind(C),this.removeListener=C.removeListener.bind(C),this.init=function(){S.on("update",l.bind(this))},this.isBusy=function(){return S.isBusy()||x},this.isDone=function(){return!S.isBusy()&&!x},this.invalidate=function(){S.clear(),V=0,this.hasClients()&&u(S,e,i.reqParams,q,0,0)},this.hasClients=function(){return C.hasListeners("update")},this.load=function(){if(!S.isBusy()){if(0!==S.dataVersion)return void setTimeout(function(){C.emit("update")},1);var t=i.reqParams,a=!i.isWidget||!i.inlineResourceId||!v[i.inlineResourceId];if(a){for(var n,o={},s={},d=(document.head||document.getElementsByTagName("head")[0],document.head.querySelectorAll('link[type="text/css"][rel=stylesheet][data-rup]')),l=0;l<d.length;l++)n=d[l].getAttribute("data-rup"),n&&(o[n]=!0);for(d=document.querySelectorAll("script[data-rup]"),l=0;l<d.length;l++)n=d[l].getAttribute("data-rup"),n&&(s[n]=!0);b=!0,t=t?r(t):{},t.haveJses=String(Object.keys(s)),t.haveCsses=String(Object.keys(o)),i.isWidget&&(t.Action="install")}g=i.resources,V=0,u(S,e,t,q,0,0)}}}function l(e,t){var r=s(e,t.reqParams);r.length<128&&(e=r,t.reqParams=void 0);var a=p[r];return a||(a=new u(e,t),a.init(),t.noCache||(p[r]=a)),t.noCache||(h.push(r),h.length>g&&d()),a}var c,v={},f=10,h=[],p={},g=f,m=!1,y=i();return{loadData:function(e,t){!t&&(t={});var r=l(e,t);return r.load(),r},loadOverlayWidget:function(e,t){var a="/OverlayWidgetAjax?Mode="+e;"string"==typeof crPageServlet&&(a+="&metaReferer="+encodeURIComponent(crPageServlet)),t=t?r(t):{},t.inlineResourceId=e,t.isWidget=!0;var n=l(a,t);return n.load(),n},cleanCache:d}});
define("overlays/options/ajax",["vanillajs","overlays/ajaxUtil"],function(t,e){"use strict";function i(t){return t&&t.match(/^((https?:)?(\/\/)?([\da-z\.\-\u00a1-\uffff]+)\.([a-z\.\u00a1-\uffff]{2,6}))?(\/[\w]+)*(\?[\/\w\.+%=\-#&\/!\u00a1-\uffff]+)?$/)}function n(t,n){function s(){if(this.sourceElement&&(t=t||this.sourceElement.getAttribute("data-url"),void 0===n.noCache&&(n.noCache=this.sourceElement.getAttribute("data-ajaxNoCache")),n.resources||(n.resources=this.sourceElement.getAttribute("data-resources"),n.resources&&(n.resources=n.resources.replace(/[\[\]]/g,"").split(/[ ,]+/)))),t){var s,a,r=0,o=function(){s.dataVersion!==r&&(this.contentElement.innerHTML=s.data,this.emit("contentsUpdated"),r=s.dataVersion,require.defined("ta/prwidgets")&&require("ta/prwidgets").initWidgets(this.contentElement)),this.reposition(),setTimeout(this.reposition.bind(this),1),this.emit("contentLoaded",s.error)}.bind(this),u=function(){return a==t?void this.reposition():(s&&s.invalidate(),a=t,s=e.loadData(t,n),this.contentElement.innerHTML=s.data,this.emit("contentsUpdated"),this.reposition(),r=s.dataVersion,require.defined("ta/prwidgets")&&require("ta/prwidgets").initWidgets(this.contentElement),s.on("update",o),void s.on("data-targetEvent",d))}.bind(this),d=this.emit.bind(this,"data-targetEvent");this.on("show",u),this.on("hide",function(){s&&(s.off("update",o),s.off("data-targetEvent",d),s=void 0)});var h=this.updateContent;this.updateContent=function(e){return e?i(e)?(t=e,this.isOpen()&&u(),this):(t="",h.apply(this,arguments)):(t="",e=this.sourceElement.getAttribute("data-url"),e?this.updateContent(e):h.apply(this,arguments))}}}return n||(n={}),s}return n});
define("overlays/styles/popover",["api-mod","lib/jquery-amd","overlays/utils"],function(t,e,a){"use strict";function i(e,i,n){this.container=t.createElement("span",{"class":"ui_overlay ui_popover arrow_"+a.getArrowDir(e,this.sourceElement,this.domParent)+" "+i,"style":n}),this.arrow=t.createElement("div",{"class":"arrow"}),this.container.appendChild(this.arrow),this.header=t.createElement("div",{"class":"header_text"}),this.container.appendChild(this.header),this.inner=t.createElement("div",{"class":"body_text"}),this.container.appendChild(this.inner),this.contentElement=this.inner,this.close=t.createElement("div",{"class":"ui_close_x"}),this.container.appendChild(this.close)}var n=function(n,r,s,o,h){n=e(n),s=s||n.attr("data-popover")||"",o=o||n.attr("data-header")||"",h=h||n.attr("data-content")||"";var d=n.attr("data-style")||"",c=n.attr("data-header-element"),l=n.attr("data-header-copy");return function(){i.call(this,r,s,d),this.updateContent(h),o&&a.injectContent(this.header,n,o,c,l),t.addEvent(this.close,"click",t.bind(function(){this.hide.apply(this,arguments)},this,"close-button"))}};return n});
define("overlays/styles/dropdown",["vanillajs","api-mod"],function(t,n){"use strict";function e(t,e,i,o){this.container=n.createElement(o||"span",{"class":"ui_overlay ui_dropdown "+e,"style":i}),this.contentElement=this.container}var i=function(t,n,i,o,r,a){i=i||t.getAttribute("data-dropdown")||"";var s=r||t.getAttribute("style")||"";return function(){e.call(this,n,i,s,a),this.updateContent(o)}};return i});
define("overlays/options/pinnable",["vanillajs","api-mod","ta/Core/TA.Event"],function(n,i,e){"use strict";return function(){function n(){c.pinned&&i.inDocument(c.container)&&!o&&(o=i.createElement("div",{"class":"ui_backdrop dark"}),o.setAttribute("style","z-index:499"),i.addEvent(o,"click",function(){c.hide()}),c.domParent.appendChild(o))}function t(){c.pinned=!0,n()}var o,c=this;this.pinned=!1,this.pin=t,this.on("show",function(){n(),e.on(c.sourceElement,"click",t)}),this.on("hide",function(){o&&(c.domParent.removeChild(o),o=void 0,e.off(c.sourceElement,"click",t))})}});
define("overlays/options/closeOnWindowshadeClick",["vanillajs","api-mod"],function(i,n){"use strict";return function(){var i=this;n.addEvent(this.shade,"click",function(){i.hide("windowshade")})}});
define("overlays/widgetoverlays",["ta","api-mod","overlays/Overlay","overlays/styles/popover","overlays/styles/modal","overlays/styles/dropdown","overlays/styles/windowshade","overlays/position","overlays/options/ajax","overlays/options/pinnable","overlays/options/closeOnWindowshadeClick","overlays/options/repositionOnEvent"],function(e,i,r,n,t,o,a,s,l,v,d,m){"use strict";function u(e,i){var r=e.prwidget_ovl||(e.prwidget_ovl={key:i});return r.key!==i&&(r.showtimer&&(clearTimeout(r.showtimer),delete r.showtimer),r.overlay&&(r.overlay.destroy(),delete r.overlay),r.key=i),r}function p(){var r=this,n=r.prwidget_ovl;if(n&&(n.showtimer&&(clearTimeout(n.showtimer),delete n.showtimer),!(e.page&&e.page.usingUnifiedDates&&i.find(".ui_modal.date_picker_modal",document.body)))){var t=n.overlay;!t||t.pinned||t.prw_leaveTimer||(t.prw_leaveTimer=setTimeout(function(){t.pinned||t.hide()},250))}}function c(){var e=this;e&&(e.prw_entered=!0,e.prw_leaveTimer&&(clearTimeout(e.prw_leaveTimer),delete e.prw_leaveTimer))}function w(){if(!(e.page&&e.page.usingUnifiedDates&&i.find(".ui_modal.date_picker_modal",document.body))){var r=this;!r||r.pinned||r.prw_leaveTimer||(r.prw_leaveTimer=setTimeout(function(){r.pinned||r.hide()},250))}}function y(e,r){var n=!e.pinned&&c.bind(e),t=!e.pinned&&w.bind(e),o=function(){n&&i.removeEvent(e.container,"mouseenter",n),t&&i.removeEvent(e.container,"mouseleave",t),e.off("hide",o),delete r.overlay};n&&i.addEvent(e.container,"mouseenter",n),t&&i.addEvent(e.container,"mouseleave",t),e.on("hide",o)}function h(e,i){var r=i.url||"/OverlayWidgetAjax?Mode="+encodeURIComponent(e);return"string"==typeof crPageServlet&&(r+="&metaReferer="+encodeURIComponent(crPageServlet)),r}function f(e,t,o,a,d){var m=u(e,o);if(m.showtimer&&(clearTimeout(m.showtimer),delete m.showtimer),!m.overlay){var p=(d.position||"wideside").split(" ").filter(function(e){return!!e.length}),c=p.shift();if("wideside"===c)try{var w=i.getPosition(e).left,f=i.getSize(e).x,g=i.getSize(document.body).x;c=w>g-w-f?"leftEvenInRtl":"rightEvenInRtl"}catch(e){c="right"}var T=""|d.classes,_=h(o,d);d.reqParams=a,d.inlineResourceId=o,d.isWidget=!0;var x=[n(e,c,T,""),l(_,d),s[c](p,!1),v];d.mixins&&d.mixins.length>0&&x.push.apply(x,d.mixins);var E=new r(e,x);"click"===t&&E.pin(),E.show(),m.overlay=E,y(E,m)}}function g(e,i,n){n=n||{};var o=(n.position||"center").trim().split(" ")[0],v=h(e,n);n.reqParams=i,n.inlineResourceId=e,n.isWidget=!0;var u=[t(null,null,n.classes),l(v,n),s[o](void 0,!0),a(),d,m(window,"resize")];n.mixins&&n.mixins.length>0&&u.push.apply(u,n.mixins);var p=null;n.sourceElement&&(p=n.sourceElement);var c=new r(p,u);return c.show(),c}function T(e,r,n,t,o){e=e||window.event,r=r||e.currentTarget;var a=e&&e.type||"click";e&&i.stopEvent(e);var s=u(r,n);if("click"===a)s.overlay||f(r,a,n,t,o);else{if(s.overlay)return s.overlay.prw_leaveTimer&&(clearTimeout(s.overlay.prw_leaveTimer),delete s.overlay.prw_leaveTimer),!1;if(s.showtimer)return!1;s.hasLeaveHandler||(i.removeEvent(r,"mouseleave",p),i.addEvent(r,"mouseleave",p),s.hasLeaveHandler=!0),s.showtimer=setTimeout(function(){f(r,a,n,t,o)},o.delay||300)}return!1}function _(e,n,t,a,v){e=e||window.event,n=n||e.currentTarget,e&&i.stopEvent(e),v=v||{};var d=(v.position||"below").trim().split(" ")[0],m=h(t,v);v.reqParams=a,v.inlineResourceId=t,v.isWidget=!0;var u=[o(n,d,v.classes,null,v.containerStyles,v.elementType||"div"),l(m,v),s[d](void 0,!0)];v.mixins&&v.mixins.length>0&&u.push.apply(u,v.mixins);var p=new r(n,u);return p.show(),p}return{triggerFlyout:T,showLightbox:g,showDropdown:_}});
require(["ta/rollupAmdShim"],function(a){a.install(["ta/Core/TA.Store","utils/store","ta/Core/TA.Load","ta/Core/TA.FireEvent","ta/Core/TA.Event","ta/Core/TA.Record","ta/util/Error","ta/util/Selenium","ta/util/roybatty","ta/Core/TA.LocalStorage","ta/Core/TA.Prerender","ta/projects","ta/Browser","ta/util/ScreenSizeRecord","utils/BatchRequest","utils/ceUtils"],["ta","ta"])});if(window.requirejs&&requirejs.taConfig){requirejs.taConfig({deferred:{},name:"core-without-dust-or-mootools",files:{js3_secure:{ssl:{ta:{Core:{"TA.Record":1,"TA.Prerender":1}}}},"js-amd":{src:{utils:{BatchRequest:1,ceUtils:1,store:1}}},js3:{src:{ta:{projects:1,util:{ScreenSizeRecord:1,roybatty:1,Error:1,Selenium:1},Browser:1,Core:{"TA.FireEvent":1,"TA.Event":1,"TA.Load":1,"TA.LocalStorage":1,"TA.Store":1}}}}},_:{baseUrl:"/"}})};
define("utils/store",["vanillajs","ta/Core/TA.Store"],function(e,r){return{add:r.store,get:r.retrieve,has:r.has,getOrAdd:r.retrieveOrStore,remove:r.remove}});
define("ta/Core/TA.Load",["vanillajs","ns-exporter","ta/Core/TA.Store","utils/resourceLoader"],function(e,r,o,a){function t(e){if("string"==typeof e&&VERSION_MAP){var r=!1;if(VERSION_MAP[e])r=e;else if(VERSION_MAP[e+".js"])r=e+".js";else for(var o=e.split("."),a=0;o&&o.length>1&&a<10;){o=o.slice(0,-1);var t=o.join("-")+".js";if(t&&VERSION_MAP[t]){r=t;break}a++}return r}}var n={};return n.load=function(e,r,n){var i=!1,s=t(e);s&&(i=VERSION_MAP[s]);var l=function(){var e=o.remove(f);e&&e.forEach(function(e){e&&e()})};if(i){var f=s+"_callback";if(o.has(f)){var c=o.retrieve(f);c.push(r),o.store(f,c)}else o.store(f,[function(){delete VERSION_MAP[s],r&&r()}]),"object"==typeof i?a.load(i,{serial:!0,forceType:"js"},l):a.load(i,{forceType:"js"},l)}else n&&a.loaded(i)&&(l(),r&&r());return i},n.loadInOrder=function(e,r){a.load(e,{serial:!0},r)},r.exportTo(n,"ta"),n});
define("ta/util/Selenium",["vanillajs","ns-exporter","mixins/Events","utils/localstorage","ta/util/Error"],function(r,t,e,n,i){var o={},a=" :: ",l="lastError";return o.lastErrorOnPage=function(){return n.get(l)},i.on("error",function(r,t,e,i){"ERROR"===e&&n.set(l,e+a+t+a+r+a+"Stack -> "+i)}),t.exportTo(o,"ta.util.selenium"),o});
define("ta/util/roybatty",["vanillajs","utils/ajax","ta/Core/TA.Event","ta/util/Error","ta/util/Cookie"],function(e,t,r,o,a){var i=!1;return r.queueForLoad(function(){if(window.taSecureToken)try{if(!window.taEarlyRoyBattyStatus){var e=a.readRaw("roybatty");if(e){var r=e.split(",");if(2==r.length){var n=parseInt(r[1],10);a.write("roybatty",taSecureToken+","+n,null,"/",cookieDomain)}else 1==r.length?a.write("roybatty",taSecureToken):o.record(null,"royBatty -- Bad value in cookie: "+e)}else a.write("roybatty",taSecureToken+",1",null,"/",cookieDomain),t(require.defined("ta/Browser")&&require("ta/Browser").isIEMetro()?"/CookiePingback?metroBrowser=true":"/CookiePingback")}i=!0}catch(e){o.record(e,"javascript exection bot detection error")}},"RoyBatty"),{isDone:function(){return i}}});
window.ta||(window.ta={});define("ta/util/RecordInterruption",["vanillajs","ta/Core/TA.Record","ta/util/Error"],function(e,a,c){var d="interruption_record";var g=["popup","popunder","gate","other"];var f=function(i,h){c.record(h,i,null,null)};var b=function(j){for(var h=0;h<g.length;h++){if(j===g[h]){return true}}return false};return{record:function(i,h){try{if(!b(i)){f("ta/util/RecordInterruption: Invalid type")}else{if(!h){f("ta/util/RecordInterruption: Name cannot be null or blank")}else{a.trackEventOnPage(d,i,h.replace(",",""),0,true)}}}catch(j){f("ta/util/RecordInterruption: exception tracking event",j)}}}});
define("ta/Core/TA.Prerender",["vanillajs","api-mod","ta/Core/TA.Record","ta/util/Error"],function(c,b,f,a,e){var i={states:{PREFETCH_SENT:"prefetchSent",CLEAR:"clear"}};var g=function(m,o,k,n,l){if(a._validatedTrackEventArray&&a._GARecordRequest){var j=a._validatedTrackEventArray(m,o,k,n,l);a._GARecordRequest(j).get();return true}return false};var h=function(){if("visibilityState" in document){i._visibilityState="visibilityState";i._visibilitystatechanged="visibilitychange";return}var k=["webkit","moz","ms","o"];for(var j=0;j<k.length;j++){if((k[j]+"VisibilityState") in document){i._visibilityState=k[j]+"VisibilityState";i._visibilitystatechanged=k[j]+"visibilitychange"}}};var d=function(){try{if(i._state===i.states.PREFETCH_SENT&&document[i._visibilityState]!=="prerender"){g("Prerender","shown","",0,true);i._state=i.states.CLEAR}}catch(j){e.record(j)}};i._init=function(j){try{i._enabled=j;i._state=i.states.CLEAR;h();if(!i.isSupported()||!i.isEnabled()){return}if(document[i._visibilityState]==="prerender"){if(g("Prerender","prefetch","",0,true)){i._state=i.states.PREFETCH_SENT;document.addEventListener(i._visibilitystatechanged,d,false)}}}catch(k){e.record(k)}};i.isEnabled=function(){return i._enabled};i.isSupported=function(){return i._visibilityState!==undefined};return i});
define("ta/projects",["vanillajs","ns-exporter","ta/Core/TA.Store"],function(t,e,n){function s(t,e){return!!(t&&e&&t.className.match(new RegExp("\\b"+e+"\\b")))}function r(t,e,n){return a.has(t)||a.setIfClass(t,e,n),a.get(t)}var a={vals:{},set:function(t,e){a.vals[t]=e},setIfClass:function(t,e,n){"string"==typeof e&&(e=document.getElementById(e)),a.vals[t]=s(e,n)},get:function(t){return a.vals[t]},has:function(t){return t in a.vals}},i={};return i.isHotelsRedesign2011=function(){var t="isHotelsRedesign2011";return a.has(t)||("LastMinute"==window.pageServlet?a.set(t,!0):a.setIfClass(t,"HAC_SMRY","hotels_re_2011")),a.get(t)},i.isSmartDealsFilters=function(){return r("smartDealsFilters","DEALS","sdfilters")},i.isAttractionsRedesign2012=function(){return r("isAttractionsRedesign2012","ATTRACTIONS_2012","gridA")},i.isMetaHomepageIntegration2013=function(){return r("isMetaHomepageIntegration2013","PPT","ppt_container")},i.isMetaHotels2013=function(){return r("isMetaHotels2013","PAGE","meta_hotels")},i.isMetaHotelsRequest=function(){return n.has("isMetaHotelsRequest")},i.isSmartDealsHSXSortEnabled=function(){return n.has("isSmartDealsHSXSortEnabled")},i.isHacMap=function(){return n.has("hac.maps.isHacMap")},i.isHRTabs2014=function(){return n.has("hr_tabs_2014")},i.isTabletAlbumViewer=function(){return n.retrieve("tabletAlbumPhotoLightbox.enabled")},i.isAirport=function(){return"Airport"==window.pageServlet},e.exportTo(i,"ta"),i});
define("ta/util/ScreenSizeRecord",["vanillajs","ta/Core/TA.LocalStorage","ta/Core/TA.Record","ta/Core/TA.Event"],function(e,n,t,i){function o(){var e=document.documentElement,n=document.body,t=window.innerWidth||e.clientWidth||n.clientWidth,i=window.innerHeight||e.clientHeight||n.clientHeight,o=screen.width,r=screen.height;return"s"+o+"x"+r+"b"+t+"x"+i}function r(e){var i=o(),r=n.getSessionKey(d);i!==r&&(n.setSessionKey(d,i),t.trackEventOnPage("screenSizeRecord",e,i))}function c(){function e(){t&&clearTimeout(t),t=setTimeout(function(){r("resize")},250)}if(ta.retrieve("screenSizeRecord")&&n.enabled){r("load");var t;window.addEventListener?window.addEventListener("resize",e,!1):window.attachEvent&&window.attachEvent("onresize",e)}}var d="screenSizeRecord";i.queueForLoad(c,"ScreenSizeRecord.onLoad")});
define("utils/BatchRequest",["utils/ajax","ta/Core/TA.Event","api-mod","vanillajs"],function(e,t,a,n){"use strict";function i(e,a){r[e]=r[e]||[],r[e].push(a),t.throttle(u,"batched-request",d,o)}function u(){for(var t in r)r.hasOwnProperty(t)&&e({type:"post",url:t,data:{batched:!0,data:r[t]}});r={}}var d=1e3,o=1e4,r={};return a.addEvent(window,"onpagehide"in window?"pagehide":"unload",u),{queue:i}});
define("utils/ceUtils",["ta","vanillajs","api-mod","mixins/Events","overlays/Overlay","overlays/styles/modal","overlays/position","overlays/options/closeOnEscape","overlays/options/autoReposition","overlays/styles/windowshade","overlays/options/ajax","utils/browserutils","overlays/widgetoverlays"],function(e,t,n,o,i,a,s,l,r,c,h,y,p){function E(){n.mixin(this,new o("showExplanatoryOverlay","hideExplanatoryOverlay","beginInstall","cancelInstall","test"));var t=this;this.detectExtension=function(e,t,n){var o=new Image;o.src="chrome-extension://"+e,o.onload=function(){t&&t()},o.onerror=function(){n&&n()}},this.isChromeExtensionInstalled=function(e,n){t.detectExtension(t.CHROME_EXT_TAG,e,n)},this.showExplanatoryOverlay=function(e){var n=this._getOsClass(),o=p.showLightbox("CHROME_EXPLANATORY_OVERLAY",{version:e,classes:n},{classes:["chrome explanatory",n,e].join(" "),mixins:[s.topCenter([0,284])]});t.emit("showExplanatoryOverlay"),t.on("hideExplanatoryOverlay",function(){o.hide()})},this.showCancelOverlay=function(e){var n=(this._getOsClass(),p.showLightbox("CHROME_CANCEL_OVERLAY",{version:e},{mixins:[s.topCenter([0,284])]}));t.emit("showCancelOverlay"),t.on("hideCancelOverlay",function(){n.hide()})},this._getOsClass=function(){var e=y.Platform.name.match(/(linux|mac|win)/),t="win";return e&&e.length>=1&&(t=e[0]),t},this.installClickHandler=function(n,o,i,a,s){window.event&&(window.event.preventDefault(),window.event.stopPropagation());try{chrome.webstore.install(E.WEBSTORE_URL,function(){e.trackEventOnPage(n,o,"installed",i,!0),t.emit("hideExplanatoryOverlay"),t.emit("installed")},function(a){if(e.trackEventOnPage(n,o+"_e",a,i,!0),/Could not fetch data from the Chrome Web Store|Installs can only be initiated by one of the Chrome Web Store item's verified sites|Inline installs can not be initiated from fullscreen/i.test(a)){var l=E.prototype.WEBSTORE_URL+"?utm_source="+o+"&utm_medium=install_error";location.href=l}t.emit("hideExplanatoryOverlay"),s&&t.showCancelOverlay(i)}),t.showExplanatoryOverlay(a),e.trackEventOnPage(n,o,"click",i)}catch(e){console.log(e)}},this.hrPriceWatchClick=function(e,n,o,i,a,s){e.classList.contains("ce-installed")||(t.on("installed",function(){e.addClass("ce-installed")}),t.installClickHandler(n,o,i,a,s))}}E.prototype.CHROME_EXT_ID="oiekdmlabennjdpgimlcpmphdjphlcha",E.prototype.CHROME_EXT_TAG=E.prototype.CHROME_EXT_ID+"/images/owl-48.png",E.prototype.WEBSTORE_URL="https://chrome.google.com/webstore/detail/"+E.prototype.CHROME_EXT_ID,E.prototype.PINTEREST_EXT_ID="";return new E});
define("overlays/uiOverlay",["vanillajs","api-mod"],function(t,e){"use strict";var a={"tooltip":{defaultPosition:"above",defaultFade:"fade_short"},"popover":{defaultPosition:"below",defaultFade:"fade_short"},"modal":{defaultPosition:"center",defaultFixed:!0,defaultFade:"fade_short"},"dropdown":{defaultPosition:"below"},"notification":{}},o={},r=function(t,r){t=t||window.event,r=r||t.target||t.srcElement;var i=t&&t.type;i&&e.removePropertyEvent(r,i,"uiOverlay"),t&&e.stopEvent(t);var s,n=(r.getAttribute("data-position")||"").split(" ").filter(function(t){return!!t.length}),l=n.shift(),u=["overlays/Overlay","overlays/position"];for(var d in a)if(r.hasAttribute("data-"+d)){l=l||a[d].defaultPosition,u.push("overlays/styles/"+d),s=!0;break}var v=r.getAttribute("data-options")||"";if(!s&&require.defined("ta/util/Error")){var c="uiOverlay: no style. class="+r.className+", id="+r.id;return[].forEach.call(r.attributes,function(t){/^data-/.test(t.name)&&(c+=", "+t.name+"="+t.value)}),void require("ta/util/Error").record(null,c)}u.push(r.hasAttribute("data-windowshade")?"overlays/styles/windowshade":null);var p=!1;r.hasAttribute("data-defer")&&(p=parseInt(r.getAttribute("data-defer"))),u.push(p?"overlays/options/hoverDelay":null),u.push(r.hasAttribute("data-fade")?"overlays/options/fadeInOut":null),u.push(r.getAttribute("data-url")?"overlays/options/ajax":null),u.push(r.hasAttribute("data-close-event")?"overlays/options/closeOnEvent":null),u.push(r.hasAttribute("data-close-ta-event")?"overlays/options/closeOnTaEvent":null),u.push(r.hasAttribute("data-maxWidth")?"overlays/options/maxWidth":null),u.push(r.hasAttribute("data-close-child")?"overlays/options/closeOnTargetChildClick":null);var h=r.hasAttribute("data-move-padding")||r.hasAttribute("data-move-source");u.push(h?"overlays/options/moveIntoView":null),u.push(r.hasAttribute("data-keep-in-dom")?"overlays/options/keepInDom":null),u.push("overlays/options/storeOverlayOnElement"),v&&(u=u.concat(v.split(" ").map(function(t){return"overlays/options/"+t}))),r.hasAttribute("data-tooltip")?"click"===i?u.push("overlays/options/closeOnDocClick"):"mouseover"===i&&v.indexOf("closeOnMouseAway")<0&&u.push("overlays/options/closeOnMouseOut"):r.hasAttribute("data-dropdown")&&("click"===i?(u.push("overlays/options/closeOnDocClick"),u.push("overlays/options/closeOnSourceClick")):"mouseover"===i&&u.push("overlays/options/closeOnMouseAway")),u.push(r.hasAttribute("data-zIndex")?"overlays/options/zIndex":null);var f;if(!(r.hasAttribute("data-unique")&&(f=r.getAttribute("data-unique"),f&&f in o))){var y;return r.hasAttribute("data-group")&&(y=r.getAttribute("data-group")),require(u,function(t,s,u,v,c,h,b,A,m,g,w,O){var E=[u(r,l),l&&s[l](n,a[d].defaultFixed),v&&v(r.getAttribute("data-windowshade")),c&&c(p,!0),h&&h(a[d].defaultFade),b&&b(),A&&A(r.getAttribute("data-close-event")),m&&m(r.getAttribute("data-close-ta-event")),g&&g(r.getAttribute("data-maxWidth")),w&&w(r.getAttribute("data-close-child")),O&&O(r.getAttribute("data-move-source"),parseInt(r.getAttribute("data-move-padding"),10))],k=Array.prototype.slice.call(arguments,11),x=new t(r,E.concat(k)),I=function(){e.select(".ui_tooltip").forEach(function(t){t.overlay&&t.overlay!=x&&t.overlay.hide()}),y&&(o[y]||[]).forEach(function(t){t!=x&&t.hide()}),x.show()};if(y){var q=o[y]||[];q.push(x),o[y]=q}if(i&&(!p&&e.addEvent(r,i,function(t){I(),e.stopEvent(t)}),x.on("destroy",function(){e.removeEvent(r,i,x.show)})),f&&(o[f]=x,x.on("destroy",function(){delete o[f]})),!p&&I(),r.hasAttribute("data-callback")){var C=e.fn(r.getAttribute("data-callback"));C&&C(x)}}),!1}var b=o[f];if(b.sourceElement=r,b.updateContent(),!p&&b.show(),r.hasAttribute("data-callback")){var A=e.fn(r.getAttribute("data-callback"));A&&A(b)}};return r}),window.uiOverlay=function(){var t=arguments;require(["overlays/uiOverlay"],function(e){e.apply(null,t)})};
define("mixins/page-dates/DateEvents",["mixins/Events","vanillajs"],function(e){"use strict";return new e("dateSelected","calendarOpened")});
define("common/pixels-loader",["vanillajs","mixins/page-dates/DateEvents","ta/Core/TA.FireEvent"],function(n,e,o){"use strict";var i,t=2e3,a=function(){require(["trjs!ta/common/behavior/Ads-pagemoniker"],function(n){n.loadMonikers(),e.on("dateSelected",function(e,o){"STAYDATES"==o&&window.setTimeout(n.loadMonikerForEnterDates,2e3)})}),i&&i.shouldInitFlightsEvents&&r(),a=function(){}},r=function(){var n=new Promise(require.bind(null,["trjs!ta/common/behavior/Ads-pagemoniker"]));o.on("lcbPop",function(){n.then(function(n){n.loadMonikerForLCBPop()})}),o.on("packageClick",function(){n.then(function(n){n.loadVacationPackageMetaMonikers()})}),o.on("metaLinkClick",function(){n.then(function(n){n.loadFlightsMetaMonikers()})}),o.on("mobileMetaLinkClick",function(){n.then(function(n){n.loadFlightsMetaMonikers()})})};return{init:function(n){i=n,n&&n.pixelsEnabled&&setTimeout(a,t)},remarketingOptions:function(){return i}}});
define("ta/common/behavior/Ads-pagemoniker",["vanillajs","ns-exporter","common/trackingStreams","ta/Core/TA.Store","common/pixels-loader"],function(f,i,g,b,e){var d={};d.remarketingOptions=e.remarketingOptions()||{};var a=function(j){if(d.remarketingOptions.pixelsEnabled===undefined){d.remarketingOptions=e.remarketingOptions()||{}}return d.remarketingOptions[j]};var c="dates.enter.moniker.fired";var h=false;d.loadMonikers=function(j){try{if(!a("pixelsEnabled")){return null}j=j||{};j.pixelType="PAGEVIEW";if(a("pixelContext")&&(a("pixelContext").servlet=="HotelBookingRoomSelectionHtml"||a("pixelContext").servlet=="MobileHotelBookingRoomSelection")){j.pixelType="IB_CLICK";d._addIBPageViewContext(j)}var k=d._loadMonikers(j);if(a("cacheMobileClickoutResponse")){j.pixelType="CLICKOUT";d._cacheClickoutMonikers(j)}return k}catch(l){g.error(l,"ads.loadMonikers",null,{context:j})}return null};d.loadMonikerForEnterDates=function(j){try{if(!a("pixelsEnabled")){return null}if(!b.retrieve(c)){b.store(c,true);j=j||{};j.pixelType="ENTER_DATES";setTimeout(d._loadMonikers.bind(null,j),2000)}}catch(k){}};d.loadClickoutMonikers=function(j){try{if(!(a("pixelsEnabled")&&a("clickoutPixelsEnabled"))){return null}if(d._cachedClickoutMonikerText){return d._appendMonikersIFrameText(d._cachedClickoutMonikerText)}j=j||{};j.pixelType="CLICKOUT";return d._loadMonikers(j)}catch(k){g.error(k,"ads.loadClickoutMonikers",null,{context:j})}return null};d.loadLightboxMonikers=function(k,m){try{if(!a("pixelsEnabled")){return null}k=k||{};k.pixelType="LIGHTBOX_CLICK";var j=d._mergeContexts(k,m);var l=d._loadMonikers(j);return l}catch(n){g.error(n,"ads.loadLightboxMonikers",null,{context:k})}return null};d.loadLightboxClickoutMonikers=function(j){try{if(!(a("pixelsEnabled")&&a("clickoutPixelsEnabled"))){return null}j=j||{};j.pixelType="LIGHTBOX_CLICKOUT";return d._loadMonikers(j)}catch(k){g.error(k,"ads.loadLightboxClickoutMonikers",null,{context:j})}return null};d.loadIBClickMonikers=function(k){if(h){return null}var j=d._loadMonikersForPixelType(k,"IB_CLICK");h=true;return j};d.loadIBRoomSelectMonikers=function(j){return d._loadMonikersForPixelType(j,"IB_ROOM_SELECT")};d.loadIBConfirmMonikers=function(j){return d._loadMonikersForPixelType(j,"IB_CONFIRM")};d.loadVRConfirmMonikers=function(j){return d._loadMonikersForPixelType(j,"VR_CONFIRM")};d.loadFlightsMetaMonikers=function(j){return d._loadMonikersForPixelType(j,"FLIGHTS_META")};d.loadVacationPackageMetaMonikers=function(j){return d._loadMonikersForPixelType(j,"PACKAGE_META")};d.loadMonikerForLCBPop=function(j){return d._loadMonikersForPixelType(j,"LCB_POP")};d._loadMonikersForPixelType=function(k,j){try{if(!(a("pixelsEnabled")&&a("ibPixelsEnabled"))){return null}k=k||{};k.pixelType=j;return d._loadMonikers(k)}catch(l){g.error(l,"loadMonikers for pixelType, ",null,{context:k})}return null};d._cacheClickoutMonikers=function(l){var m=a("pixelContext");var j=d._mergeContexts(m,l);var k=d._buildPixelUrl(j);if(!k){return}k+="&reportOnly=true";var n=new XMLHttpRequest();n.open("GET",k,true);n.onreadystatechange=function(){if(this.readyState==4){d._cachedClickoutMonikerText=this.response}};n.send()};d._addIBPageViewContext=function(j){if(document.getElementById("roomList")){j.lowestPrice=document.getElementById("roomList").dataset.lowestPrice}if(document.getElementById("roomInfoContainer")){j.lowestPrice=document.getElementById("roomInfoContainer").dataset.lowestPrice}};d._buildPixelUrl=function(l){if(!a("pixelServlet")){g.error(null,"ads._buildPixelUrl: remarketing.pixelServlet not set");return null}var m=a("pixelList");if(!m){return null}var j="/"+a("pixelServlet")+"?pixelList="+m;for(var k in l){if(l.hasOwnProperty(k)){j+="&"+k+"="+l[k]}}if(ta.uid){j+="&puid="+ta.uid}return j};d._appendMonikersIFrame=function(j){var k=document.createElement("iframe");k.setAttribute("id","Monikers");k.setAttribute("style","border:none; position:absolute; bottom:0; right:0");k.setAttribute("width","1");k.setAttribute("height","1");k.setAttribute("src",j);document.body.appendChild(k);return k};d._appendMonikersIFrameText=function(l){var k=document.createElement("iframe");k.setAttribute("id","Monikers");k.setAttribute("style","border:none; position:absolute; bottom:0; right:0");k.setAttribute("width","1");k.setAttribute("height","1");document.body.appendChild(k);var j=k.contentDocument||k.contentWindow.document;j.open().write(l);j.close();return k};d._mergeContexts=function(m,l){if(!m){return l}else{if(!l){return m}}var k;var j={};for(k in m){if(m.hasOwnProperty(k)){j[k]=m[k]}}for(k in l){if(l.hasOwnProperty(k)){j[k]=l[k]}}return j};d._loadMonikers=function(l){var n,j;try{n=a("pixelContext");j=d._mergeContexts(n,l);var k=d._buildPixelUrl(j);if(!k){return null}return d._appendMonikersIFrame(k)}catch(m){g.error(m,"ads._loadMonikers",null,{pixelContext:n,extraContext:l})}return null};i.exportTo(d,"ta.common.ads");return d});
define("mobile/lite/image-loader",["utils/throttle","vanillajs"],function(e){"use strict";function t(t,n){n=n||document,o=t||0;var i=Array.prototype.filter.call(n.querySelectorAll("["+l+"]"),r());if(0!=i.length){var a=e(function(e){i=i.filter(r()),0==i.length&&(window.removeEventListener("scroll",a),window.removeEventListener("resize",a))},200);window.addEventListener("scroll",a),window.addEventListener("resize",a)}}function r(){return function(e){if(!document.body.contains(e))return!1;try{if(!i(e))return!0}catch(e){return!1}var t=e.getAttribute(l);return null==t||("IMG"===e.tagName?e.src=t:e.style.backgroundImage="url("+t+")",e.removeAttribute(l),!1)}}function n(e){e=e||document;var t=e.querySelectorAll("["+l+"]");Array.prototype.filter.call(t,r())}function i(e){var t=e.getBoundingClientRect();return t.width>0&&t.height>0&&t.top+o>=0&&t.top-o<=window.innerHeight}var o,l="data-lazyurl";return{init:t,demandLoadImages:n}});
define("ta/util/LocalStorage",["vanillajs","ns-exporter","ta/Core/TA.LocalStorage","ta/util/SessionStorage"],function(d,e,b,c){var a={canUseLocalStore:function(){return b.enabled},canUseSessionStore:function(){return c.canUseSessionStore()}};e.exportTo(a,"ta.util.localstorage");return a});
define("post_rollup_globals_shim",["page-model","ns-exporter","common/trackingStreams"],function(e,t,r){var n=e.session;require(["api-mod"],function(t){t.addEvent(document,"regOverlay:success",function(){e.session.loggedIn=!0})});var o={uid:n.uid,userLoggedIn:n.loggedIn,userSecurelyLoggedIn:n.securelyLoggedIn};t.exportTo(o,"ta");try{var s=XMLHttpRequest.prototype,i=s.send;s.send=function(e){try{var t=new RegExp("^(/[^/]|(http(s)?:)?//"+window.location.hostname+")");this._url&&t.test(this._url)&&this.setRequestHeader("X-Puid",n.uid)}catch(e){}i.call(this,e)};var u=s.open;s.open=function(e,t){return this._url=t,u.apply(this,arguments)}}catch(e){r.error(e,"Error intercepting AJAX for tracking")}});
define("servlets/standardTemplateSupport",["page-model","mobile/lite/image-loader","ta/Core/TA.Event","ta/Core/TA.LocalStorage","ta/util/LocalStorage","ta/util/Currency","ta/util/SessionStorage","post_rollup_globals_shim"],function(e,o,s,t,a,i,n,l){function r(){s.queueForLoad(function(){o.init(200)},"lazy load images"),e&&e.session&&e.session.sessionId&&t.updateSessionId(e.session.sessionId)}return{footerInit:r}});
define("Logging",["vanillajs"],function(n){for(var e="undefined"!=typeof IS_DEBUG&&IS_DEBUG?4:1,o={},r=["error","warn","dir","info","debug"],f=0;f<r.length;f++){var i=r[f];o[i]=function(n,o){return function(){e<o||"undefined"!=typeof console&&console[n]&&console[n].apply&&console[n].apply(console,arguments)}}(i,f)}return o.setLevel=function(n){e=n},o});
define("facebook/authutils",["api-mod","lib/jquery-amd","Logging","ta/Core/TA.Store","ta/util/Deferred","ta/util/SessionStorage","ta/util/Cookie","ta/util/Error"],function(e,t,n,o,i,s,r,a){"use strict";var u=6e5,c="fbAutoLoginTime",d=new i,f=function(e,t){var n=t||"v1.0";return FB.init({appId:e,version:n}),d.resolve()},l=function(e){d.promise().success(e)},p=function(){r.setOneTimeCookieOnFQDN("FacebookAuthCode2","ConflictedFBAccount"),window.location.reload()},g=function(){var t=new i;return R()?(FB.getLoginStatus(function(n){if("connected"===n.status&&n.authResponse){if(o.has("cached.facebookuid"))return void h(o.retrieve("cached.facebookuid"),n.authResponse.userID);var i=new XMLHttpRequest;i.open("POST","/FacebookConnectAjax",!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send("a=autologin&signedRequest="+encodeURIComponent(n.authResponse.signedRequest)),i.onreadystatechange=function(){if(4==i.readyState){if(200!=i.status)return t.reject();t.resolve(),e.fireEvent(document,"regOverlay:success")}}}}),t.promise()):t.reject()},h=function(e,t){e!==""+t&&(a.record(null,"Mismatched Facebook uid between cached value and authResponse. cached: "+e+", response: "+t),p())},m=function(){R()&&FB.getLoginStatus(function(e){if("connected"===e.status&&e.authResponse){if(o.has("cached.facebookuid"))return void h(o.retrieve("cached.facebookuid"),e.authResponse.userID);var t=new XMLHttpRequest;t.open("POST","/FacebookConnectAjax",!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.send("a=refresh&signedRequest="+encodeURIComponent(e.authResponse.signedRequest))}})},v=function(e,n,o){var i=t("form#"+e),s=i.find("."+n).val();return s&&s.match(/.+\@.+\..+/)?void i.submit():void i.find("."+o).removeClass("hidden")},R=function(){if(s.canUseSessionStore())try{var e=(new Date).getTime(),t=sessionStorage.getItem(c);return null==t?(sessionStorage.setItem(c,e),!0):(t=parseInt(t),e-t<u?(n.info("Skipping FB autologin, tried too recently"),!1):(sessionStorage.setItem(c,e),!0))}catch(e){a.record(null,"Error storing FB autologin attempt: "+e)}return!0};return{init:f,autoLogin:g,queueForInit:l,refreshToken:m,submitEmailRegistration:v}});
define("google/authutils",["api-mod","lib/jquery-amd","Logging","ta/Core/TA.Store","ta/util/Deferred","ta/util/SessionStorage","ta/util/Error"],function(e,o,t,r,n,i,a){"use strict";var s=6e5,u="googleOneTapTime",c="hideGoogleOneTap",l=new n,g=function(){return l.resolve()},d=function(e){l.promise().success(e)},p=function(e,o,t){var r=new n;if(!f())return r.reject();var i=e.hint({supportedAuthMethods:[o],supportedIdTokenProviders:[{uri:o,clientId:t}],context:"signIn"});return require(["trjs!ta/Core/TA.Record"],function(e){e.trackEventOnPage("google_onetap","google_onetap_requested","requested")}),null==i?r.reject():(i.then(function(e){require(["trjs!ta/Core/TA.Record"],function(e){e.trackEventOnPage("google_onetap","google_onetap_selected","selected")});var o=window.location.pathname;window.location="/RegistrationController?flow=GOOGLE_ONETAP&pid=40185&requireSecure=true&forceDesktop=false&fullscreen=true&google_id_token="+e.idToken+"&returnTo="+o,r.resolve()})["catch"](function(e){switch(e.type){case"userCanceled":return document.cookie=c+"=1;domain="+cookieDomain,void require(["trjs!ta/Core/TA.Record"],function(e){e.trackEventOnPage("google_onetap","google_onetap_closed","closed")});case"noCredentialsAvailable":return;case"requestFailed":case"operationCanceled":case"illegalConcurrentRequest":case"initializationError":case"configurationError":default:return void a.record(null,"Unknown error processing Google onetap hint request - type, message: "+e.type+", "+e.message,null,{},"WARN")}}),r.promise())},f=function(){if(i.canUseSessionStore())try{var e=(new Date).getTime(),o=sessionStorage.getItem(u);return null==o?(sessionStorage.setItem(u,e),!0):(o=parseInt(o),e-o<s?(t.info("Skipping Google onetap, tried too recently"),!1):(sessionStorage.setItem(u,e),!0))}catch(e){a.record(null,"Error storing Google onetap attempt: "+e)}return!0};return{init:g,sendHintRequest:p,queueForInit:d}});
